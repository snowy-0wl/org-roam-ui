(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{72013:function(e,t,n){"use strict";n.r(t),n.d(t,{Graph:function(){return Er},GraphPage:function(){return Lr},default:function(){return zr}});var r=n(15861),i=n(42982),o=n(4942),l=n(70885),s=n(87757),a=n.n(s),c=n(40980),u=n(74860),d=n(95869),h=n(48017),g=n(94096),f=n(96699),p=n(48420),x=n(57775),j=n(54309),v=n(52596),b=n(9008),m=n(67294),y=n(32802),C=n.n(y),O=n(47516),w=n(63750),k=n(22003),S=n(31122),N=n(7520),I=n(36194),P=[],D={};for(var z in I.oY)for(var L in I.oY[z]){var E=z+L;"LinearNone"===E&&(E="Linear"),P.push(E),D[E]=I.oY[z][L]}var B=D,T={enabled:!0,charge:-700,collision:!0,collisionStrength:20,centering:!0,centeringStrength:.2,linkStrength:.3,linkIts:1,alphaDecay:.05,alphaTarget:0,alphaMin:0,velocityDecay:.25,gravity:.3,gravityOn:!1,gravityLocal:!1},R={orphans:!1,dailies:!1,parent:"heading",filelessCites:!1,tagsBlacklist:[],tagsWhitelist:[],dirsBlocklist:[],dirsAllowlist:[],bad:!0,nodes:[],links:[],date:[],noter:!0},Z={method:"degree"},F={particles:!1,particlesNumber:0,particlesWidth:4,arrows:!1,arrowsLength:1,arrowsPos:.5,arrowsColor:"",linkOpacity:.8,linkWidth:1,nodeRel:3,nodeOpacity:1,nodeResolution:12,labels:2,labelScale:1.5,labelFontSize:10,labelLength:40,labelWordWrap:25,labelLineSpace:1,labelDynamicDegree:8,labelDynamicStrength:.5,highlight:!0,highlightNodeSize:1.1,highlightLinkSize:.7,highlightFade:.8,highlightAnim:!0,animationSpeed:360,algorithmOptions:P,algorithmName:"CircularOut",linkColorScheme:"gray.500",nodeColorScheme:["red.500","gray.600","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","orange.500"],nodeHighlight:"purple.500",linkHighlight:"purple.500",backgroundColor:"white",emacsNodeColor:"gray.800",labelTextColor:"black",labelBackgroundColor:"",labelBackgroundOpacity:.7,citeDashes:!0,citeDashLength:35,citeGapLength:15,citeLinkColor:"gray.700",citeLinkHighlightColor:"",citeNodeColor:"black",refDashes:!0,refDashLength:35,refGapLength:15,refLinkColor:"gray.700",refLinkHighlightColor:"",refNodeColor:"black",nodeSizeLinks:.5,nodeZoomSize:1.2},H={follow:"zoom",localSame:"add",zoomPadding:200,zoomSpeed:2e3},W={highlight:"hover",local:"double",follow:"never",context:"right",preview:"click",backgroundExitsLocal:!1},A={neighbors:1},M=["red.500","orange.500","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","white","gray.100","gray.200","gray.300","gray.400","gray.500","gray.600","gray.700","gray.800","gray.900","black"],V=n(11252),J=n(336),X=n(85675),_=n(72026),U=n(64115),q=n(49364),Q=n(94030),G=n(85305),K=n(46617),$=n(50862),Y=n(68928),ee=n(55830),te=n(2827);function ne(e,t,n){n.send(JSON.stringify({command:e,data:t}))}function re(e,t){ne("open",{id:e.id},t)}var ie=n(77787),oe=n(45987),le=n(80658),se=n(38554),ae=n.n(se),ce=n(84461),ue=n(73808),de=n(53869),he=n(39629);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]};var xe=function(e,t){return fe(fe({},e),{},{delay:(0,ue.hj)(t)?t:null===t||void 0===t?void 0:t.enter})},je=function(e,t){return fe(fe({},e),{},{delay:(0,ue.hj)(t)?t:null===t||void 0===t?void 0:t.exit})},ve=n(85893),be=["in","unmountOnExit","animateOpacity","startingSize","endingSize","dimension","style","className","transition","transitionEnd"];function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e){return null!=e&&parseInt(e.toString(),10)>0},Oe={exit:{size:{duration:.2,ease:pe.ease},opacity:{duration:.3,ease:pe.ease}},enter:{size:{duration:.3,ease:pe.ease},opacity:{duration:.4,ease:pe.ease}}},we={exit:function(e){var t,n,r=e.animateOpacity,i=e.startingSize,l=e.transition,s=e.transitionEnd,a=e.delay,c=e.dimension;return ye(ye({},r&&{opacity:Ce(i)?1:0}),{},(n={overflow:"hidden"},(0,o.Z)(n,c,i),(0,o.Z)(n,"transitionEnd",null===s||void 0===s?void 0:s.exit),(0,o.Z)(n,"transition",null!==(t=null===l||void 0===l?void 0:l.exit)&&void 0!==t?t:je(Oe.exit,a)),n))},enter:function(e){var t,n,r=e.animateOpacity,i=e.endingSize,l=e.transition,s=e.transitionEnd,a=e.delay,c=e.dimension;return ye(ye({},r&&{opacity:1}),{},(n={},(0,o.Z)(n,c,i),(0,o.Z)(n,"transitionEnd",null===s||void 0===s?void 0:s.enter),(0,o.Z)(n,"transition",null!==(t=null===l||void 0===l?void 0:l.enter)&&void 0!==t?t:xe(Oe.enter,a)),n))}},ke=m.forwardRef((function(e,t){var n=e.in,r=e.unmountOnExit,i=e.animateOpacity,o=void 0===i||i,s=e.startingSize,a=void 0===s?0:s,c=e.endingSize,u=void 0===c?"auto":c,d=e.dimension,h=void 0===d?"height":d,g=e.style,f=e.className,p=e.transition,x=e.transitionEnd,j=(0,oe.Z)(e,be),v=m.useState(!1),b=(0,l.Z)(v,2),y=b[0],C=b[1];m.useEffect((function(){var e=setTimeout((function(){C(!0)}));return function(){return clearTimeout(e)}}),[]),(0,le.ZK)({condition:Boolean(a>0&&r),message:"startingSize and unmountOnExit are mutually exclusive. You can't use them together"});var O=parseFloat(a.toString())>0,w={startingSize:a,endingSize:u,animateOpacity:o,dimension:h,transition:y?p:{enter:{duration:0}},transitionEnd:ae()(x,{enter:{overflow:"initial"},exit:r?void 0:{display:O?"block":"none"}})},k=!r||n,S=n||r?"enter":"exit";return(0,ve.jsx)(de.M,{initial:!1,custom:w,children:k&&(0,ve.jsx)(he.E.div,ye(ye({ref:t},j),{},{className:(0,ce.cx)("chakra-collapse",f),style:ye({overflow:"hidden",display:"block"},g),custom:w,variants:we,initial:!!r&&"exit",animate:S,exit:"exit"}))})}));function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ue.Ts&&(ke.displayName="Collapse");var Ie=function(e){var t=e.setTagColors,n=e.setFilter,r=e.filter,l=e.tagColors,s=e.target,a=r.tagsBlacklist,c=r.tagsWhitelist,d=a.indexOf(s)>-1,f=c.indexOf(s)>-1,p=(0,u.q)();return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)(h.xu,{bgColor:l[s],borderRadius:"sm",height:3,width:3,borderColor:l[s]||"gray.600",borderWidth:1}),closeOnSelect:!1,onClick:p.onToggle,children:(0,ve.jsx)(U.x,{children:"Change color"})}),(0,ve.jsx)(ke,{in:p.isOpen,children:(0,ve.jsxs)(g.k,{ml:2,mt:2,flexWrap:"wrap",children:[(0,ve.jsx)(h.xu,{children:(0,ve.jsx)(h.xu,{tabIndex:0,cursor:"pointer",onClick:function(){return t((function(e){return Object.fromEntries(Object.keys(e).filter((function(e){return e!==s})).map((function(t){return[t,e[t]]})))}))},bgColor:"",m:1,borderRadius:"sm",borderColor:"gray.600",borderWidth:1,height:3,width:3})},"empty"),M.map((function(e){return(0,ve.jsx)(h.xu,{children:(0,ve.jsx)(h.xu,{tabIndex:0,cursor:"pointer",onClick:function(){return t(Ne(Ne({},l),{},(0,o.Z)({},s,e)))},bgColor:e,m:1,borderRadius:"sm",height:3,width:3})},e)}))]})}),!f&&(0,ve.jsx)(V.sN,{onClick:function(){n(d?function(e){return Ne(Ne({},e),{},{tagsBlacklist:e.tagsBlacklist.filter((function(e){return e!==s}))})}:function(e){return Ne(Ne({},e),{},{tagsBlacklist:[].concat((0,i.Z)(e.tagsBlacklist),[s])})})},icon:d?(0,ve.jsx)(G.V,{}):(0,ve.jsx)(ie.t,{}),children:d?"Remove from blocklist":"Add to blocklist"}),!d&&(0,ve.jsx)(V.sN,{onClick:function(){n(f?function(e){return Ne(Ne({},e),{},{tagsWhitelist:e.tagsWhitelist.filter((function(e){return e!==s}))})}:function(e){return Ne(Ne({},e),{},{tagsWhitelist:[].concat((0,i.Z)(e.tagsWhitelist),[s])})})},icon:f?(0,ve.jsx)(G.V,{}):(0,ve.jsx)(ee.O,{}),children:f?"Remove from allowlist":"Add to allowlist"})]})},Pe=function(e){e.background;var t,n,r=e.target,i=(e.nodeType,e.coordinates),o=e.handleLocal,l=e.menuClose,s=e.scope,a=e.webSocket,c=e.setPreviewNode,d=e.setTagColors,h=e.tagColors,g=e.setFilter,f=e.filter,p=(0,u.q)(),x=p.isOpen,j=p.onOpen,v=p.onClose;(0,m.useRef)();return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(V.v2,{defaultIsOpen:!0,closeOnBlur:!1,onClose:function(){return l()},children:(0,ve.jsx)(V.qy,{zIndex:"overlay",bgColor:"white",color:"black",position:"absolute",left:i.left,top:i.top,right:i.right,bottom:i.bottom,fontSize:"xs",boxShadow:"xl",children:"string"!==typeof r?(0,ve.jsxs)(ve.Fragment,{children:[r&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(J.X,{size:"xs",isTruncated:!0,px:3,py:1,children:r.title}),(0,ve.jsx)(V.R,{borderColor:"gray.500"})]}),0!==s.nodeIds.length&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(V.sN,{onClick:function(){return o(r,"add")},icon:(0,ve.jsx)(Q.I,{}),children:"Expand local graph at node"}),(0,ve.jsx)(V.sN,{onClick:function(){return o(r,"replace")},icon:(0,ve.jsx)(O.DvO,{}),children:"Open local graph for this node"}),(0,ve.jsx)(V.sN,{onClick:function(){return o(r,"remove")},icon:(0,ve.jsx)(G.V,{}),children:"Exclude node from local graph"})]}),null!==r&&void 0!==r&&null!==(t=r.properties)&&void 0!==t&&t.FILELESS?(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)($.d,{}),onClick:function(){return function(e,t){ne("create",{id:e.id,title:e.title,ref:e.properties.ROAM_REFS},t)}(r,a)},children:"Create node"}):(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)(K.d,{}),onClick:function(){return re(r,a)},children:"Open in Emacs"}),(null===r||void 0===r||null===(n=r.properties)||void 0===n?void 0:n.ROAM_REFS)&&(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)(Y.h,{}),children:"Open in Zotero"}),0===s.nodeIds.length&&(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)(O.DvO,{}),onClick:function(){return o(r,"replace")},children:"Open local graph"}),(0,ve.jsx)(V.sN,{icon:(0,ve.jsx)(ee.O,{}),onClick:function(){c(r)},children:"Preview"}),0===(null===r||void 0===r?void 0:r.level)&&(0,ve.jsx)(V.sN,{closeOnSelect:!1,icon:(0,ve.jsx)(te.p,{color:"red.500"}),color:"red.500",onClick:j,children:"Permanently delete note"})]}):(0,ve.jsx)(Ie,{target:r,tagColors:h,filter:f,setTagColors:d,setFilter:g})})}),"string"!==typeof r&&(0,ve.jsxs)(X.u_,{isCentered:!0,isOpen:x,onClose:v,children:[(0,ve.jsx)(X.ZA,{}),(0,ve.jsxs)(X.hz,{zIndex:"popover",children:[(0,ve.jsx)(X.xB,{children:"Delete node?"}),(0,ve.jsx)(X.ol,{}),(0,ve.jsx)(X.fe,{children:(0,ve.jsxs)(_.gC,{spacing:4,display:"flex",alignItems:"flex-start",children:[(0,ve.jsx)(U.x,{children:"This will permanently delete your note:"}),(0,ve.jsx)(U.x,{fontWeight:"bold",children:null===r||void 0===r?void 0:r.title}),0!==(null===r||void 0===r?void 0:r.level)&&(0,ve.jsx)(U.x,{children:"This will only delete the from this heading until but not including the next node. Your parent file and all other nodes will not be deleted."}),(0,ve.jsx)(U.x,{children:"Are you sure you want to do continue?"})]})}),(0,ve.jsxs)(X.mz,{children:[(0,ve.jsx)(q.z,{mr:3,onClick:function(){console.log("closing"),v(),l()},children:"Cancel"}),(0,ve.jsx)(q.z,{variant:"link",colorScheme:"red",ml:3,onClick:function(){console.log("aaaaa"),function(e,t){0===e.level&&ne("delete",{id:e.id,file:e.file},t)}(r,a),v(),l()},children:"Delete node"})]})]})]})]})},De=n(67101),ze=n(5434),Le=n(35255),Ee=n(56884),Be=n(51649),Te=function(e){var t=e.setJustification,n=(e.setIndent,e.setFont,e.justification),r=(e.setPreviewNode,e.canUndo),i=e.canRedo,o=(e.resetPreviewNode,e.previousPreviewNode),l=e.nextPreviewNode,s=e.outline,a=e.setOutline,c=e.collapse,u=e.setCollapse;return(0,ve.jsxs)(g.k,{flex:"0 1 40px",pb:3,alignItems:"center",justifyContent:"space-between",pr:1,children:[(0,ve.jsx)(g.k,{children:(0,ve.jsxs)(De.h,{isAttached:!0,children:[(0,ve.jsx)(f.u,{label:"Go backward",children:(0,ve.jsx)(p.h,{_focus:{},variant:"subtle",icon:(0,ve.jsx)(Le.w,{}),"aria-label":"Previous node",disabled:!r,onClick:function(){return o()}})}),(0,ve.jsx)(f.u,{label:"Go forward",children:(0,ve.jsx)(p.h,{_focus:{},variant:"subtle",icon:(0,ve.jsx)(Ee.X,{}),"aria-label":"Next node",disabled:!i,onClick:function(){return l()}})})]})}),(0,ve.jsxs)(g.k,{children:[(0,ve.jsx)(f.u,{label:"Justify content",children:(0,ve.jsx)(p.h,{variant:"subtle","aria-label":"Justify content",icon:[(0,ve.jsx)(O.v9V,{},"justify"),(0,ve.jsx)(O.YSr,{},"left"),(0,ve.jsx)(O.RXA,{},"right"),(0,ve.jsx)(O.tr_,{},"center")][n],onClick:function(){return t((function(e){return(e+1)%4}))}})}),(0,ve.jsx)(f.u,{label:"Toggle outline view",children:(0,ve.jsx)(p.h,{variant:"subtle","aria-label":"Justify content",icon:s?(0,ve.jsx)(Be.XQM,{}):(0,ve.jsx)(Be.JfF,{}),onClick:function(){return a((function(e){return!e}))}})}),(0,ve.jsx)(f.u,{label:"Toggle headers",children:(0,ve.jsx)(p.h,{variant:"subtle","aria-label":"Toggle headers",icon:c?(0,ve.jsx)(ze.omV,{}):(0,ve.jsx)(ze.egf,{}),onClick:function(){return u((function(e){return!e}))}})})]})]})},Re=n(35528);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function(e){var t,n,r,o=e.filter,l=e.setFilter,s=e.tagColors,a=(e.setTagColors,e.openContextMenu),c=e.previewNode;return null!==c&&void 0!==c&&c.tags&&null!==(null===c||void 0===c||null===(t=c.tags)||void 0===t?void 0:t[0])?(0,ve.jsx)(g.k,{mb:2,flexWrap:"wrap",children:null===c||void 0===c||null===(n=c.tags)||void 0===n||null===(r=n.map)||void 0===r?void 0:r.call(n,(function(e){var t,n,r,c=null!==(t=o.tagsBlacklist)&&void 0!==t?t:[],u=null!==(n=o.tagsWhitelist)&&void 0!==n?n:[],d=c.includes(e),h=u.includes(e);return(0,ve.jsxs)(Re.Vp,{tabIndex:0,mr:2,mt:2,onContextMenu:function(t){t.preventDefault(),a(e,t)},cursor:"pointer",onClick:function(){l(d?function(t){return Fe(Fe({},t),{},{tagsBlacklist:t.tagsBlacklist.filter((function(t){return t!==e})),tagsWhitelist:[].concat((0,i.Z)(t.tagsWhitelist),[e])})}:h?function(t){return Fe(Fe({},t),{},{tagsWhitelist:t.tagsWhitelist.filter((function(t){return t!==e}))})}:function(t){return Fe(Fe({},t),{},{tagsBlacklist:[].concat((0,i.Z)(t.tagsBlacklist),[e])})})},size:"sm",variant:"outline",colorScheme:(null===(r=s[e])||void 0===r?void 0:r.replaceAll(/(.*?)\..*/g,"$1"))||void 0,children:[(0,ve.jsx)(Re.Sn,{children:e}),d?(0,ve.jsx)(Re.bq,{as:ie.t}):h?(0,ve.jsx)(Re.bq,{as:ee.O}):null]},e)}))}):null},We=n(18835),Ae=n.n(We),Me=n(13816),Ve=n.n(Me),Je=n(42728),Xe=n.n(Je),_e=n(77890),Ue=n.n(_e),qe=n(94986),Qe=n.n(qe),Ge=n(88541),Ke=n.n(Ge),$e=n(71167),Ye=n.n($e),et=(n(85062),n(27431)),tt=n.n(et),nt=n(12861),rt=n.n(nt),it=n(10043),ot=n.n(it),lt=n(80816),st=n(93545),at=n.n(st),ct=n(15941),ut=n.n(ct),dt=n(67597),ht=n.n(dt),gt=n(44549),ft=n.n(gt),pt=n(78818),xt=n.n(pt),jt=n(49444),vt=n(45170),bt=n(67273),mt=n(29356),yt={".headingFlex":{flexDirection:"row-reverse",justifyContent:"flex-end"},".outlineHeadingButton":{display:"none"},h1:{color:"black",lineHeight:"1.2",fontSize:"16",fontWeight:"bold",paddingTop:2},h2:{fontSize:"14",color:"black",fontWeight:"bold",fontStyle:"bold italic",paddingTop:2},h3:{fontSize:"13",color:"black",paddingTop:2},h4:{fontSize:"12",fontStyle:"italic",color:"black",paddingTop:2},".sectionContent":{paddingTop:2}},Ct={".headingFlex":{flexDirection:"row",justifyContent:"flex-start"},".viewerHeadingButton":{display:"none"},".sectionContent":{mt:3,paddingLeft:4,ml:"11px",borderLeftWidth:"1px",borderLeftColor:"gray.500"},".preHeadingContent":{},"h1,h2,h3,h4,h5,h6,h7,h8":{pl:1,lineHeight:"1.25",color:"black",fontSize:15,fontWeight:700},".sec":{pt:1},".wrapClass > div > p":{mb:2},p:{fontWeight:500,fontSize:14,pb:2}},Ot={".katex":{overflowX:"scroll"},ol:{paddingLeft:4,py:1},"li::marker":{fontSize:12,fontWeight:"bold"},li:{pt:1},ul:{paddingLeft:"5"},p:{fontSize:"14",fontWeight:"500 !important",pb:2},div:{hyphens:"auto !important"},".title":{textAlign:"center",marginBottom:".2em"},".subtitle":{textAlign:"center",fontSize:"medium",fontWeight:"bold",marginTop:0},".TODO":{color:"red.500"},".equationContainer":{display:"table",textAlign:"center",width:"100%"},".equation":{verticalAlign:"middle"},".equation-label":{display:"tableCell",textAlign:"right",verticalAlign:"middle"},".inlinetask":{padding:"10px",border:"2px solid gray",margin:"10px",background:"#ffffcc"},"#org-div-home-and-up":{textAlign:"right",fontSize:"70 % ",whiteSpace:"nowrap"},textarea:{overflowX:"auto"},".linenr":{fontSize:"smaller"},".org-info-js_info-navigation":{borderStyle:"none"},"#org-info-js_console-label":{fontSize:"10px",fontWeight:"bold",whiteSpace:"nowrap"},".org-info-js_search-highlight":{backgroundColor:"#ffff00",color:"#000000",fontWeight:"bold"},".org-svg":{width:"90%"},".DONE":{color:"green"},".priority":{fontFamily:"monospace",color:"orange"},".tag":{backgroundColor:"white",fontFamily:"monospace",padding:"2px",fontSize:"80%",fontWeight:"normal"},".timestamp":{color:"#bebebe"},".timestamp-kwd":{color:"#5f9ea0"},".org-right":{marginLeft:"auto",marginRight:"0px",textAlign:"right"},".org-left":{marginLeft:"0px",marginRight:"auto",textAlign:"left"},".org-center":{marginLeft:"auto",marginRight:"auto",textAlign:"center"},".underline":{textDecoration:"underline"},"#postamble p":{fontSize:"90%",margin:".2em"},"#preamble p":{fontSize:"90%",margin:".2em"},"p.verse":{marginLeft:"3%"},pre:{borderRadius:"3px",backgroundColor:"white",padding:"8pt",fontFamily:"monospace",overflow:"auto",margin:"1.2em"},"pre.src":{position:"relative",overflow:"auto"},"pre.src:before":{display:"none",position:"absolute",top:"-8px",right:"12px",padding:"3px",backgroundColor:"white"},"caption.t-above":{captionSide:"top"},"caption.t-bottom":{captionSide:"bottom"},"th.org-right":{textAlign:"center"},"th.org-left":{textAlign:"center"},"th.org-center":{textAlign:"center"},"td.org-right":{textAlign:"right"},"td.org-left":{textAlign:"left"},"td.org-center":{textAlign:"center"},".footpara":{display:"inline"},".footdef":{marginBottom:"1em"},".figure":{padding:"1em"},".figure p":{textAlign:"center"},".math.math-display .katex":{overflow:"auto",minHeight:"1.5em"}},wt=n(86658),kt=function(e,t){return e.split(".").reduce((function(e,t){return e[t]}),t.colors)},St=["style"];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt=function(e){var t=e.noUnderline,n=e.id,r=e.setSidebarHighlightedNode,i=e.setPreviewNode,o=e.nodeById,l=e.openContextMenu,s=e.href,a=e.children,u=e.isWiki,d=(0,m.useContext)(mt.N).highlightColor,h=(0,c.useTheme)(),g=kt(d,h),f=(s.replaceAll(/(.*?)\:?.*/g,"$1"),s.replaceAll(/.*?\:(.*)/g,"$1")),p=null!==n&&void 0!==n?n:f,x=u?"[[".concat(a,"]]"):a;return(0,ve.jsx)(U.x,{as:"a",onMouseEnter:function(){return r(o[p])},onMouseLeave:function(){return r({})},tabIndex:0,display:"inline",overflow:"hidden",fontWeight:500,color:d,textDecoration:t?void 0:"underline",onContextMenu:function(e){e.preventDefault(),l(o[f],e)},onClick:function(){return i(o[f])},_hover:{textDecoration:"none",cursor:"pointer",bgColor:g+"22"},_focus:{outlineColor:d},children:x})},Dt=function(e){var t=e.href,n=e.children,r=(0,m.useContext)(mt.N).highlightColor;return(0,ve.jsxs)(jt.r,{color:r,isExternal:!0,href:t,children:[n,(0,ve.jsx)(Y.h,{mx:"1px",pb:"2px"})]})},zt=function(e){var t,n=e.href,r=e.children,i=e.nodeById,o=e.setSidebarHighlightedNode,l=e.previewNode,s=e.setPreviewNode,a=e.nodeByCite,c=e.openContextMenu,u=e.outline,d=e.noUnderline,g=e.linksByNodeId,f=e.isWiki,p=e.macros,x=e.attachDir,j=e.useInheritance,v=(0,m.useState)(null),b=v[0],y=v[1],C=(0,m.useState)(!1),O=C[0],w=C[1],k=n.replaceAll(/(.*?)\:.*/g,"$1"),S=u?Ct:yt;console.log(l);if((0,m.useEffect)((function(){k.replaceAll(/(http)?.*/g,"$1")||b||O&&fetch("http://localhost:35901/node/".concat(L)).then((function(e){return e.text()})).then((function(e){"error"===e||y(e)})).catch((function(e){return console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."}))}),[O,b]),!k)return(0,ve.jsx)(U.x,{color:"gray.700",children:r});if(k.replaceAll(/(http)?.*/g,"$1"))return(0,ve.jsx)(Dt,{href:n,children:r});var N,I,P,D,z=n.replaceAll(/.*?\:(.*)/g,"$1"),L=function(e,t){if("id"===e)return t;if(e.includes("cite")){var n,r=null!==(n=a[t])&&void 0!==n&&n;return r?null!==r&&void 0!==r&&r.properties.FILELESS?"":null===r||void 0===r?void 0:r.id:""}return""}(k,z);encodeURIComponent(encodeURIComponent(null===(t=i[L])||void 0===t?void 0:t.file));return L?(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(vt.J2,{gutter:12,trigger:"hover",placement:"top-start",children:[(0,ve.jsx)(vt.xo,{children:(0,ve.jsx)(h.xu,{display:"inline",onMouseEnter:function(){return w(!0)},onMouseLeave:function(){return w(!1)},children:(0,ve.jsx)(Pt,{id:L,setSidebarHighlightedNode:o,setPreviewNode:s,nodeById:i,href:n,children:r,nodeByCite:a,openContextMenu:c,noUnderline:d,isWiki:f},null!==(N=null===(I=i[L])||void 0===I?void 0:I.title)&&void 0!==N?N:L)})}),(0,ve.jsx)(bt.h,{children:(0,ve.jsxs)(vt.yk,{transform:"scale(1)",boxShadow:"xl",position:"relative",zIndex:"tooltip",onMouseEnter:function(){var e;o(null!==(e=i[L])&&void 0!==e?e:{})},onMouseLeave:function(){o({})},children:[(0,ve.jsx)(vt.QH,{}),(0,ve.jsx)(vt.b,{pb:5,fontSize:"xs",position:"relative",zIndex:"tooltip",transform:"scale(1)",width:"100%",children:(0,ve.jsx)(wt.$B,{autoHeight:!0,autoHeightMax:300,autoHide:!0,renderThumbVertical:function(e){var t=e.style,n=(0,oe.Z)(e,St);return(0,ve.jsx)(h.xu,It({style:It(It({},t),{},{borderRadius:0})},n))},children:(0,ve.jsx)(h.xu,{w:"100%",color:"black",px:3,sx:It(It({},Ot),S),children:(0,ve.jsx)(Xt,{previewText:b,nodeById:i,setSidebarHighlightedNode:o,setPreviewNode:s,nodeByCite:a,openContextMenu:c,outline:u,linksByNodeId:g,macros:p,attachDir:x,useInheritance:j,previewNode:i[L],collapse:!1})})})})]},null!==(P=null===(D=i[L])||void 0===D?void 0:D.title)&&void 0!==P?P:L)})]})}):(0,ve.jsx)(U.x,{as:"span",display:"inline",className:n,color:"base.700",cursor:"not-allowed",children:r})},Lt=n(25675),Et=n(62520),Bt=n.n(Et),Tt=n(53850),Rt=function(e){var t=e.src,n=e.file;if(t.replaceAll(/(http)?.*/g,"$1"))return console.log(t.replaceAll(/(http)?.*/g,"$1")),(0,ve.jsx)(Lt.default,{layout:"responsive",loader:function(e){var t=e.src;return e.width,e.quality,"".concat(t)},src:t,alt:"",width:"auto",height:"auto"});var r=t.replaceAll(/file:/g,""),i=Bt().dirname(n),o=Bt().isAbsolute(r)||"~"===r.slice(0,1)?r:Bt().join(i,r),l=encodeURIComponent(encodeURIComponent(o));return(0,ve.jsx)(Tt.W,{my:4,position:"relative",children:(0,ve.jsx)("img",{alt:"Wow, an image.",src:"http://localhost:35901/img/".concat(l)})})},Zt=n(14578),Ft=n(6780),Ht=n(6569),Wt=(0,m.createContext)({outline:!1,collapse:!0}),At=function(e){var t=e.children,n=e.className,r=(0,m.useState)(!0),i=r[0],o=r[1],l=(0,m.useContext)(Wt).collapse;if((0,m.useEffect)((function(){o(!l)}),[l]),"h0Wrapper headingWrapper"===n)return(0,ve.jsxs)(h.xu,{className:"preHeadingContent",children:[" ",t]});var s=t;return(0,ve.jsxs)(h.xu,{className:"sec",children:[(0,ve.jsx)(h.xu,{display:"block",children:(0,ve.jsxs)(g.k,{className:"headingFlex",alignItems:"baseline",children:[i&&s.length>0?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(p.h,{className:"viewerHeadingButton",_focus:{},_active:{},"aria-label":"Expand heading",size:"xs",variant:"subtle",icon:(0,ve.jsx)(Ft.g,{}),onClick:function(){return o(!i)},height:2,width:2}),(0,ve.jsx)(p.h,{className:"outlineHeadingButton",_focus:{},_active:{},"aria-label":"Expand heading",size:"xs",variant:"subtle",icon:(0,ve.jsx)(Zt.zOz,{}),onClick:function(){return o(!i)},height:2,width:2})]}):(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(p.h,{className:"viewerHeadingButton",_active:{},_focus:{},"aria-label":"Collapse heading",height:2,width:2,size:"xs",variant:"subtle",icon:(0,ve.jsx)(Ht.v,{}),onClick:function(){return o(!i)}}),(0,ve.jsx)(p.h,{className:"outlineHeadingButton",_active:{},_focus:{},"aria-label":"Collapse heading",height:2,width:2,size:"xs",variant:"subtle",icon:(0,ve.jsx)(Zt.O6Y,{}),onClick:function(){return o(!i)}})]}),s[0]]})}),i&&(0,ve.jsx)(h.xu,{className:"sectionContent",children:s.slice(1)})]})};function Mt(e){return["object"===typeof e.source?e.source.id:e.source,"object"===typeof e.target?e.target.id:e.target]}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=function(e){var t,n,r=e.nodeById,i=e.setSidebarHighlightedNode,l=e.setPreviewNode,s=e.previewText,a=e.nodeByCite,u=e.previewNode,d=e.openContextMenu,g=e.outline,f=e.collapse,p=e.linksByNodeId,x=e.macros,j=e.attachDir,v=e.useInheritance;if(!u||!p)return null;var b=Ae()().use(Ve()).use(Qe()).use(Ke(),{idDir:j||void 0,useInheritance:v}).use(Ue()).use(Xe(),{useSections:!0}),y=(null===(t=p[null===u||void 0===u?void 0:u.id])||void 0===t?void 0:t.reduce((function(e,t){var n=Mt(t).filter((function(e){return e!==u.id})).join("");return Jt(Jt({},e),{},(0,o.Z)({},n,r[n]))}),{}))||{},C=Object.entries(y),O=Ae()().use(rt()).use(ut(),["yaml"]).use(ht()).use(lt.Z,{permaLinks:Object.keys(y),pageResolver:function(e){var t,n=C.find((function(t){var n;return(null===t||void 0===t||null===(n=t[1])||void 0===n?void 0:n.title)===e}));return[null!==(t=null===n||void 0===n?void 0:n[0])&&void 0!==t?t:""]},hrefTemplate:function(e){return"id:".concat(e)}}).use(ft()).use(at()).use(ot()).use(xt()),w=".md"===(null===u||void 0===u||null===(n=u.file)||void 0===n?void 0:n.slice(-3)),k=w?O:b,S=(0,m.useMemo)((function(){return k.use(Ye(),{trust:function(e){return["\\htmlId","\\href"].includes(e.command)},macros:Jt({"\\eqref":"\\href{###1}{(\\text{#1})}","\\ref":"\\href{###1}{\\text{#1}}","\\label":"\\htmlId{#1}{}"},x)}).use(tt(),{createElement:m.createElement,components:{a:function(e){var t=e.children,n=e.href;return(0,ve.jsx)(zt,{nodeByCite:a,setSidebarHighlightedNode:i,href:"".concat(n),nodeById:r,linksByNodeId:p,setPreviewNode:l,openContextMenu:d,outline:g,previewNode:u,isWiki:w,macros:x,attachDir:j,useInheritance:v,children:t})},img:function(e){var t=e.src;return(0,ve.jsx)(Rt,{src:t,file:null===u||void 0===u?void 0:u.file})},section:function(e){var t=e.children,n=e.className;return n&&n.slice(-1)==="".concat(u.level)?(0,ve.jsx)(h.xu,{children:t.slice(1)}):(0,ve.jsx)(At,{outline:g,collapse:f,className:n,children:t})},blockquote:function(e){var t=e.children;return(0,ve.jsx)(c.chakra.blockquote,{color:"gray.800",bgColor:"gray.300",pt:4,pb:2,mb:4,mt:3,pl:4,borderLeftWidth:4,borderLeftColor:"gray.700",children:t})},p:function(e){var t=e.children;return(0,ve.jsx)("p",{lang:"en",children:t})}}})}),[null===u||void 0===u?void 0:u.id]),N=(0,m.useMemo)((function(){return S.processSync(s).result}),[s]);return(0,ve.jsx)(Wt.Provider,{value:{collapse:f,outline:g},children:N})},_t=function(e){var t=e.openContextMenu,n=e.setSidebarHighlightedNode,r=e.nodeById,i=e.nodeByCite,o=e.previewNode,l=e.setPreviewNode,s=e.outline,a=e.collapse,c=e.linksByNodeId,u=e.macros,d=e.attachDir,h=e.useInheritance,g=(0,m.useState)(""),f=g[0],p=g[1],x=encodeURIComponent(encodeURIComponent(o.id));return(0,m.useEffect)((function(){fetch("http://localhost:35901/node/".concat(x)).then((function(e){return e.text()})).then((function(e){if(""===e)return"(empty node)";"error"!==e&&(console.log(e),p(e))})).catch((function(e){return p("(could not find node)"),console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."}))}),[o.id]),(0,ve.jsx)(ve.Fragment,{children:f&&o&&(0,ve.jsx)(Xt,{nodeById:r,previewNode:o,setPreviewNode:l,previewText:f,nodeByCite:i,setSidebarHighlightedNode:n,openContextMenu:t,outline:s,collapse:a,linksByNodeId:c,attachDir:d,useInheritance:h,macros:u||{}})})},Ut=function(e){var t,n=e.previewNode,r=e.setPreviewNode,i=e.setSidebarHighlightedNode,o=e.nodeById,s=e.linksByNodeId,a=e.nodeByCite,c=e.openContextMenu,u=e.outline,d=e.macros,g=e.attachDir,f=e.useInheritance,p=(null!==(t=s[null===n||void 0===n?void 0:n.id])&&void 0!==t?t:[]).filter((function(e){var t=Mt(e),r=(0,l.Z)(t,2),i=r[0];r[1];return i!==(null===n||void 0===n?void 0:n.id)})).map((function(e){return e.source}));return(0,ve.jsxs)(h.xu,{className:"backlinks",borderRadius:"sm",mt:6,p:4,bg:"white",mb:10,children:[(0,ve.jsx)("p",{style:{fontSize:16,fontWeight:600},children:"Linked references (".concat(p.length,")")}),(0,ve.jsx)(_.gC,{py:2,spacing:3,alignItems:"start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(null===n||void 0===n?void 0:n.id)&&p.map((function(e){var t,l,p;t=null===(l=o[e])||void 0===l?void 0:l.title;return(0,ve.jsx)(h.xu,{overflow:"hidden",py:1,borderRadius:"sm",width:"100%",children:(0,ve.jsx)(zt,{linksByNodeId:s,nodeByCite:a,setSidebarHighlightedNode:i,href:"id:".concat(e),nodeById:o,previewNode:n,setPreviewNode:r,openContextMenu:c,outline:u,noUnderline:!0,attachDir:g,useInheritance:f,macros:d,children:null===(p=o[e])||void 0===p?void 0:p.title})},e)}))})]})};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=function(e){var t=e.setPreviewNode,n=e.justificationList,r=e.justification,i=e.previewNode,o=e.nodeById,l=e.nodeByCite,s=e.setSidebarHighlightedNode,a=e.linksByNodeId,c=e.openContextMenu,u=e.outline,d=e.collapse,f=e.macros,p=e.attachDir,x=e.useInheritance,j=u?Ct:yt;return(0,ve.jsx)(h.xu,{pr:8,pt:2,height:"100%",className:"org",sx:Qt(Qt(Qt({},Ot),j),{},{textAlign:n[r]}),children:(null===i||void 0===i?void 0:i.id)&&(0,ve.jsxs)(g.k,{className:"wrapClass",height:"100%",flexDirection:"column",justifyContent:"space-between",children:[(0,ve.jsx)(_t,{setPreviewNode:t,previewNode:i,nodeByCite:l,setSidebarHighlightedNode:s,openContextMenu:c,outline:u,collapse:d,nodeById:o,linksByNodeId:a,macros:f,attachDir:p,useInheritance:x}),(0,ve.jsx)(Ut,{setPreviewNode:t,previewNode:i,nodeById:o,linksByNodeId:a,nodeByCite:l,setSidebarHighlightedNode:s,openContextMenu:c,outline:u,attachDir:p,useInheritance:x,macros:f||{}})]})})},Kt=function(e){var t=e.previewNode;return(0,ve.jsx)(g.k,{maxW:"90%",children:(0,ve.jsx)(J.X,{lineHeight:1.2,size:"md",fontWeight:600,pt:4,children:null===t||void 0===t?void 0:t.title})})},$t=n(29119);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=nn(e,null!==(n=r.storage)&&void 0!==n?n:localStorage),o=i.get(),l=void 0!==o?o:t,s=null!=o&&"object"===typeof o&&!1===Array.isArray(o)?en(en({},t),o):l;s!==o&&i.update(s);var a=(0,m.useState)(s),c=a[0],u=a[1];(0,m.useEffect)((function(){c!==s&&u(s)}),[e]);var d=function(e){e instanceof Function?u((function(t){var n=e(t);return i.update(n),n})):(u(e),i.update(e))};return[c,d]}function nn(e,t){return{get:function(){var n=t.getItem(e);if(n&&"undefined"!==n)return JSON.parse(n)},update:function(n){t.setItem(e,JSON.stringify(n))},remove:function(){t.removeItem(e)}}}var rn=["style"];function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=function(e){var t=e.isOpen,n=e.onOpen,r=e.onClose,i=e.previewNode,o=e.setPreviewNode,s=e.nodeById,a=e.linksByNodeId,c=e.nodeByCite,u=e.setSidebarHighlightedNode,d=e.canUndo,f=e.canRedo,x=e.resetPreviewNode,j=e.previousPreviewNode,v=e.nextPreviewNode,b=e.openContextMenu,y=(e.scope,e.setScope,e.windowWidth),C=e.filter,w=e.setFilter,k=e.tagColors,S=e.setTagColors,N=e.macros,I=e.attachDir,P=e.useInheritance,D=((0,m.useContext)(mt.N).highlightColor,(0,m.useState)()),z=D[0],L=D[1],E=tn("sidebarWidth",400),B=(0,l.Z)(E,2),T=B[0],R=B[1];(0,m.useEffect)((function(){null!==i&&void 0!==i&&i.id?(n(),L(i)):r()}),[null===i||void 0===i?void 0:i.id]);var Z=tn("justification",1),F=(0,l.Z)(Z,2),H=F[0],W=F[1],A=tn("outline",!1),M=(0,l.Z)(A,2),V=M[0],J=M[1],X=(0,m.useState)("sans serif"),U=(X[0],X[1]),q=(0,m.useState)(0),Q=(q[0],q[1]),G=(0,m.useState)(!1),K=G[0],$=G[1];return(0,ve.jsx)(ke,{animateOpacity:!1,dimension:"width",in:t,unmountOnExit:!0,startingSize:0,style:{height:"100vh"},children:(0,ve.jsx)($t.e,{size:{height:"100vh",width:T},onResizeStop:function(e,t,n,r){R((function(e){return e+r.width}))},enable:{top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},minWidth:"220px",maxWidth:y-200,children:(0,ve.jsxs)(g.k,{flexDir:"column",h:"100vh",pl:2,color:"black",bg:"alt.100",width:"100%",children:[(0,ve.jsxs)(g.k,{pl:2,alignItems:"center",color:"black",width:"100%",children:[(0,ve.jsx)(g.k,{pt:1,flexShrink:0,children:(0,ve.jsx)(Te,{setJustification:W,setIndent:Q,setFont:U,justification:H,setPreviewNode:o,canUndo:d,canRedo:f,resetPreviewNode:x,previousPreviewNode:j,nextPreviewNode:v,outline:V,setOutline:J,collapse:K,setCollapse:$})}),(0,ve.jsx)(g.k,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",onContextMenu:function(e){e.preventDefault(),b(i,e)}}),(0,ve.jsx)(g.k,{flexDir:"row",ml:"auto",children:(0,ve.jsx)(p.h,{m:1,icon:(0,ve.jsx)(O.T41,{}),"aria-label":"Options",variant:"subtle",onClick:function(e){b(i,e,{left:void 0,top:12,right:20-y,bottom:void 0})}})})]}),(0,ve.jsx)(wt.$B,{autoHide:!0,renderThumbVertical:function(e){var t=e.style,n=(0,oe.Z)(e,rn);return(0,ve.jsx)(h.xu,ln({style:ln(ln({},t),{},{borderRadius:0})},n))},children:z&&(0,ve.jsxs)(_.gC,{flexGrow:1,alignItems:"left",bg:"alt.100",paddingLeft:4,children:[(0,ve.jsx)(Kt,{previewNode:z}),(0,ve.jsx)(He,{filter:C,setFilter:w,tagColors:k,setTagColors:S,openContextMenu:b,previewNode:i}),(0,ve.jsx)(Gt,{setPreviewNode:o,previewNode:i,nodeById:s,nodeByCite:c,setSidebarHighlightedNode:u,justification:H,justificationList:["justify","start","end","center"],linksByNodeId:a,openContextMenu:b,outline:V,setOutline:J,collapse:K,macros:N,attachDir:I,useInheritance:P})]})})]})})})},an=n(93924),cn=n(83986),un=n(48931),dn=n(56769),hn=n(88134),gn=n(47647);function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xn=function(e){var t,n=e.filter,r=e.listName,i=e.labelFilter,l=e.displayName,s=e.setFilter,a=e.options,c=void 0===a?[]:a,u=(0,m.useContext)(mt.N).highlightColor,d=(null===c||void 0===c?void 0:c.map((function(e){return{value:e,label:i?e.replace(i,""):e}})))||[],h=(0,m.useState)((null===(t=n[r])||void 0===t?void 0:t.map((function(e){return{value:e,label:i?null===e||void 0===e?void 0:e.replace(i,""):e}})))||[]),g=h[0],f=h[1];return(0,ve.jsx)(gn.CUIAutoComplete,{labelStyleProps:{fontWeight:300,fontSize:14},items:d,label:"Add tag to ".concat(l),placeholder:" ",onCreateItem:function(e){return null},disableCreateItem:!0,selectedItems:g,onSelectedItemsChange:function(e){e.selectedItems&&(f(e.selectedItems),s(pn(pn({},n),{},(0,o.Z)({},r,e.selectedItems.map((function(e){return e.value}))))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{mt:2,height:8,focusBorderColor:u,color:"gray.800",borderColor:"gray.500"},tagStyleProps:{justifyContent:"flex-start",fontSize:10,borderColor:u,borderWidth:1,borderRadius:"md",color:u,bg:"",height:4,mb:2},hideToggleButton:!0,itemRenderer:function(e){return e.label}})};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=function(e){var t=e.colorList,n=e.tagColors,r=e.setTagColors,i=e.highlightColor,l=e.tags.map((function(e){return{value:e,label:e}})),s=(0,m.useState)(Object.keys(n).map((function(e){return{value:e,label:e}}))),a=s[0],c=s[1];return(0,ve.jsxs)(h.xu,{children:[(0,ve.jsx)(gn.CUIAutoComplete,{items:l,labelStyleProps:{fontWeight:300,fontSize:14},label:"Add tag to color",placeholder:" ",disableCreateItem:!0,selectedItems:a,onSelectedItemsChange:function(e){e.selectedItems&&(c(Array.from(new Set(e.selectedItems))),r(Object.fromEntries(Array.from(new Set(e.selectedItems)).map((function(e){var t;return[e.label,null!==(t=n[e.label])&&void 0!==t?t:"gray.600"]})))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{height:8,focusBorderColor:i,color:"gray.800",borderColor:"gray.500"},tagStyleProps:{display:"none",rounded:"full",bg:i,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:function(e){return e.label}}),(0,ve.jsx)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:Object.keys(n).map((function(e){return(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",width:"100%",pl:2,children:[(0,ve.jsx)(h.xu,{width:"100%",children:(0,ve.jsx)(U.x,{children:e})}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,colorScheme:"",color:"black",children:(0,ve.jsx)(h.xu,{bgColor:n[e],borderRadius:"sm",height:6,width:6})}),(0,ve.jsx)(bt.h,{children:(0,ve.jsx)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:t.map((function(t){return(0,ve.jsx)(V.sN,{onClick:function(){return r(vn(vn({},n),{},(0,o.Z)({},e,t)))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{bgColor:t,borderRadius:"sm",height:6,width:6})},t)}))})})]}),(0,ve.jsx)(p.h,{"aria-label":"Delete tag color",variant:"ghost",icon:(0,ve.jsx)(te.p,{}),onClick:function(){r(Object.fromEntries(Array.from(new Set(a)).map((function(e){var t;return[e.label,null!==(t=n[e.label])&&void 0!==t?t:"gray.600"]})))),c(a.filter((function(t){return t.value!==e})))}})]},e)}))})]})},mn=n(24682),yn=n(24189),Cn=function(e){var t=e.infoText;return(0,ve.jsx)(h.xu,{paddingLeft:"1",children:(0,ve.jsx)(f.u,{label:t,placement:"top",color:"gray.100",bg:"gray.800",hasArrow:!0,children:(0,ve.jsx)(yn.h,{})})})},On=["min","max","step","value"],wn=function(e){var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?10:r,o=e.step,l=void 0===o?.1:o,s=e.value,a=void 0===s?1:s,c=(0,oe.Z)(e,On),u=c.onChange,d=c.label,g=c.infoText,p=(0,m.useContext)(mt.N).highlightColor;return(0,ve.jsxs)(h.xu,{pt:1,pb:2,children:[(0,ve.jsxs)(h.xu,{display:"flex",alignItems:"flex-end",mb:2,children:[(0,ve.jsx)(U.x,{children:d}),g&&(0,ve.jsx)(Cn,{infoText:g})]}),(0,ve.jsxs)(mn.iR,{value:a,onChange:u,min:n,max:i,step:l,children:[(0,ve.jsx)(mn.Uj,{children:(0,ve.jsx)(mn.Ms,{})}),(0,ve.jsx)(f.u,{bg:p,label:a.toFixed(1),children:(0,ve.jsx)(mn.gs,{bg:"white"})})]})]},d)},kn=(0,m.createContext)({subDirs:["dailies",".attach"],attachDir:".attach",useInheritance:!1,roamDir:"~/org",dailyDir:"dailies"});function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In=function(e){var t=e.filter,n=e.setFilter,r=e.local,i=e.setLocal,o=e.tagColors,l=e.setTagColors,s=e.highlightColor,a=e.colorList,c=e.tags,u=(0,m.useContext)(kn),d=u.roamDir,f=u.subDirs;return(0,ve.jsxs)(h.xu,{children:[(0,ve.jsxs)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Link children to"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",size:"sm",children:function(){switch(t.parent){case"parent":return(0,ve.jsx)(U.x,{children:"File"});case"heading":return(0,ve.jsx)(U.x,{children:"Heading"});default:return(0,ve.jsx)(U.x,{children:"Nothing"})}}()}),(0,ve.jsx)(bt.h,{children:(0,ve.jsxs)(V.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n((function(e){return Nn(Nn({},e),{},{parent:""})}))},children:"Nothing"}),(0,ve.jsx)(V.sN,{onClick:function(){return n((function(e){return Nn(Nn({},e),{},{parent:"parent"})}))},children:"Parent file node"}),(0,ve.jsx)(V.sN,{onClick:function(){return n((function(e){return Nn(Nn({},e),{},{parent:"heading"})}))},children:"Next highest heading node"})]})})]})]}),(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Orphans"}),(0,ve.jsx)(hn.r,{onChange:function(){n((function(e){return Nn(Nn({},e),{},{orphans:!e.orphans})}))},isChecked:t.orphans})]}),(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Dailies"}),(0,ve.jsx)(hn.r,{onChange:function(){n((function(e){return Nn(Nn({},e),{},{dailies:!e.dailies})}))},isChecked:t.dailies})]}),(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Org-noter pages"}),(0,ve.jsx)(hn.r,{onChange:function(){n((function(e){return Nn(Nn({},e),{},{noter:!e.noter})}))},isChecked:t.noter})]}),(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Citations without note files"}),(0,ve.jsx)(hn.r,{onChange:function(){n(Nn(Nn({},t),{},{filelessCites:!t.filelessCites}))},isChecked:t.filelessCites})]}),(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Non-existent nodes"}),(0,ve.jsx)(hn.r,{onChange:function(){l(Nn(Nn({},o),{},{bad:"white"})),n(Nn(Nn({},t),{},{bad:!t.bad}))},isChecked:t.bad})]}),(0,ve.jsx)(wn,{label:"Number of neighbors in local graph",value:r.neighbors,onChange:function(e){return i(Nn(Nn({},r),{},{neighbors:e}))},min:1,max:5,step:1})]}),(0,ve.jsxs)(dn.UQ,{padding:0,allowToggle:!0,allowMultiple:!0,paddingLeft:3,children:[(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:["Directory filters",(0,ve.jsx)(dn.XE,{})]}),(0,ve.jsxs)(dn.Hk,{pr:0,mr:0,children:[(0,ve.jsx)(xn,{filter:t,setFilter:n,options:f,displayName:"directory blocklist",listName:"dirsBlocklist",labelFilter:d}),(0,ve.jsx)(xn,{filter:t,setFilter:n,options:f,displayName:"directory allowlist",listName:"dirsAllowlist",labelFilter:d})]})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:["Tag filters",(0,ve.jsx)(dn.XE,{})]}),(0,ve.jsxs)(dn.Hk,{pr:0,mr:0,children:[(0,ve.jsx)(xn,{filter:t,setFilter:n,options:c,displayName:"tag blocklist",listName:"tagsBlacklist"}),(0,ve.jsx)(xn,{filter:t,setFilter:n,options:c,displayName:"tag allowlist",listName:"tagsWhitelist"})]})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:["Tag colors",(0,ve.jsx)(dn.XE,{})]}),(0,ve.jsx)(dn.Hk,{pr:0,mr:0,children:(0,ve.jsx)(bn,{tags:c,colorList:a,tagColors:o,setTagColors:l,highlightColor:s})})]})]})]})},Pn=n(20224),Dn=n(42629),zn=function(e){try{var t=JSON.parse(e),n=t.theme.colorTheme;localStorage.setItem("colorTheme",n),localStorage.setItem("highlightColor",t.theme.highlightColor),localStorage.setItem("sidebarWidth",JSON.stringify(t.layout.sidebarWidth)),localStorage.setItem("mainWindowWidth",JSON.stringify(t.layout.mainWindowWidth)),localStorage.setItem("showTweaks",JSON.stringify(t.layout.showTweaks)),localStorage.setItem("justification",JSON.stringify(t.layout.justification)),localStorage.setItem("outline",JSON.stringify(t.layout.outline)),localStorage.setItem("physics",JSON.stringify(t.physics)),localStorage.setItem("filter",JSON.stringify(t.filter)),localStorage.setItem("visuals",JSON.stringify(t.visuals)),localStorage.setItem("behavior",JSON.stringify(t.behavior)),localStorage.setItem("mouse",JSON.stringify(t.mouse)),localStorage.setItem("local",JSON.stringify(t.local)),localStorage.setItem("coloring",JSON.stringify(t.coloring)),localStorage.setItem("tagCols",JSON.stringify(t.tagColors))}catch(r){throw console.error("Failed to import settings:",r),new Error("Invalid settings file format")}},Ln=function(){var e=(0,m.useRef)(null),t=(0,c.useToast)();return(0,ve.jsx)(h.xu,{children:(0,ve.jsxs)(_.gC,{spacing:4,align:"stretch",p:4,children:[(0,ve.jsx)(U.x,{fontSize:"sm",color:"gray.600",children:"Export your current settings to a file or import settings from a previously exported file."}),(0,ve.jsx)(q.z,{leftIcon:(0,ve.jsx)(Pn._,{}),colorScheme:"blue",variant:"outline",onClick:function(){try{var e=function(){var e={theme:{colorTheme:localStorage.getItem("colorTheme")||"[]",highlightColor:localStorage.getItem("highlightColor")||""},layout:{sidebarWidth:JSON.parse(localStorage.getItem("sidebarWidth")||"400"),mainWindowWidth:JSON.parse(localStorage.getItem("mainWindowWidth")||"800"),showTweaks:JSON.parse(localStorage.getItem("showTweaks")||"false"),justification:JSON.parse(localStorage.getItem("justification")||"1"),outline:JSON.parse(localStorage.getItem("outline")||"false")},physics:JSON.parse(localStorage.getItem("physics")||JSON.stringify(T)),filter:JSON.parse(localStorage.getItem("filter")||JSON.stringify(R)),visuals:JSON.parse(localStorage.getItem("visuals")||JSON.stringify(F)),behavior:JSON.parse(localStorage.getItem("behavior")||JSON.stringify(H)),mouse:JSON.parse(localStorage.getItem("mouse")||JSON.stringify(W)),local:JSON.parse(localStorage.getItem("local")||JSON.stringify(A)),coloring:JSON.parse(localStorage.getItem("coloring")||JSON.stringify(Z)),tagColors:JSON.parse(localStorage.getItem("tagCols")||"{}")};return JSON.stringify(e,null,2)}(),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="org-roam-ui-settings.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),t({title:"Settings exported",description:"Your settings have been saved to org-roam-ui-settings.json",status:"success",duration:3e3,isClosable:!0})}catch(o){t({title:"Export failed",description:"Failed to export settings",status:"error",duration:3e3,isClosable:!0})}},size:"sm",children:"Export Settings"}),(0,ve.jsx)(q.z,{leftIcon:(0,ve.jsx)(Dn.H,{}),colorScheme:"blue",variant:"outline",onClick:function(){var t;null===(t=e.current)||void 0===t||t.click()},size:"sm",children:"Import Settings"}),(0,ve.jsx)("input",{type:"file",ref:e,onChange:function(e){var n,i=null===(n=e.target.files)||void 0===n?void 0:n[0];if(i){var o=new FileReader;o.onload=function(){var e=(0,r.Z)(a().mark((function e(n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=null===(r=n.target)||void 0===r?void 0:r.result,zn(i),t({title:"Settings imported",description:"Your settings have been imported successfully. Reloading page...",status:"success",duration:2e3,isClosable:!0}),setTimeout((function(){window.location.reload()}),2e3)}catch(o){t({title:"Import failed",description:"Failed to import settings. Make sure the file is valid.",status:"error",duration:3e3,isClosable:!0})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.readAsText(i)}},accept:".json",style:{display:"none"}})]})})},En=n(15267),Bn=function(e){var t=e.value,n=e.onChange,r=e.label,i=e.infoText,o=e.children;return(0,ve.jsxs)(h.xu,{paddingTop:2,children:[(0,ve.jsxs)(h.xu,{display:"flex",justifyContent:"space-between",paddingBottom:2,children:[(0,ve.jsxs)(h.xu,{display:"flex",alignItems:"center",children:[(0,ve.jsx)(U.x,{children:r}),i&&(0,ve.jsx)(Cn,{infoText:i})]}),(0,ve.jsx)(hn.r,{isChecked:!!t,onChange:n})]}),(0,ve.jsx)(En.U,{in:!!t,animateOpacity:!0,children:(0,ve.jsx)(h.xu,{paddingLeft:4,paddingTop:2,paddingBottom:2,children:o})})]},r)};function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn=function(e){var t=e.physics,n=e.setPhysics,r=(0,m.useCallback)((function(e,t,r){n((function(n){return Rn(Rn({},n),{},(0,o.Z)({},t,e/r))}))}),[]);return(0,ve.jsxs)(h.xu,{children:[(0,ve.jsxs)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,ve.jsxs)(Bn,{label:"Gravity",value:t.gravityOn,onChange:function(){return n(Rn(Rn({},t),{},{gravityOn:!t.gravityOn}))},children:[(0,ve.jsxs)(g.k,{justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Also in local"}),(0,ve.jsx)(hn.r,{onChange:function(){n((function(e){return Rn(Rn({},e),{},{gravityLocal:!e.gravityLocal})}))},isChecked:t.gravityLocal})]}),(0,ve.jsx)(wn,{label:"Strength",value:10*t.gravity,onChange:function(e){return r(e,"gravity",10)}})]}),(0,ve.jsx)(wn,{value:-t.charge/100,onChange:function(e){return r(e,"charge",-.01)},label:"Repulsive Force"}),(0,ve.jsx)(wn,{value:5*t.linkStrength,onChange:function(e){return r(e,"linkStrength",5)},label:"Link Force"}),(0,ve.jsx)(wn,{label:"Stabilization rate",value:50*t.alphaDecay,onChange:function(e){return r(e,"alphaDecay",50)}})]}),(0,ve.jsx)(h.xu,{children:(0,ve.jsx)(dn.UQ,{paddingLeft:3,allowToggle:!0,children:(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:[(0,ve.jsx)(U.x,{children:"Advanced"}),(0,ve.jsx)(dn.XE,{marginRight:2})]}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsxs)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:3,color:"gray.800",children:[(0,ve.jsx)(Bn,{label:"Collision",infoText:"Perfomance sap, disable if slow",value:t.collision,onChange:function(){return n(Rn(Rn({},t),{},{collision:!t.collision}))},children:(0,ve.jsx)(wn,{value:t.collisionStrength/5,onChange:function(e){return r(e,"collisionStrength",.2)},label:"Collision Radius",infoText:"Easy with this one, high values can lead to a real jiggly mess"})}),(0,ve.jsx)(wn,{label:"Link iterations",value:t.linkIts,onChange:function(e){return r(e,"linkIts",1)},min:0,max:6,step:1,infoText:"How many links down the line the physics of a single node affects (Slow)"}),(0,ve.jsx)(wn,{label:"Viscosity",value:10*t.velocityDecay,onChange:function(e){return r(e,"velocityDecay",10)}}),(0,ve.jsx)(Bn,{label:"Center nodes",value:t.centering,onChange:function(){return n(Rn(Rn({},t),{},{centering:!t.centering}))},infoText:"Keeps the nodes in the center of the viewport. If disabled you can drag the nodes anywhere you want.",children:(0,ve.jsx)(wn,{label:"Centering Strength",value:t.centeringStrength,max:2,step:.01,onChange:function(e){return r(e,"centeringStrength",1)}})})]})})]})})})]})};function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wn=function(e){var t=e.behavior,n=e.setBehavior,r=e.mouse,i=e.setMouse;return(0,ve.jsxs)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Preview node"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",children:(0,ve.jsx)(U.x,{children:r.preview?r.preview[0].toUpperCase()+r.preview.slice(1):"Never"})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{preview:""}))},children:"Never"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{preview:"click"}))},children:"Click"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{preview:"double"}))},children:"Double Click"})]})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsxs)(g.k,{children:[(0,ve.jsx)(U.x,{children:"Expand Node"}),(0,ve.jsx)(Cn,{infoText:"View only the node and its direct neighbors"})]}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",children:(0,ve.jsx)(U.x,{children:r.local?r.local[0].toUpperCase()+r.local.slice(1):"Never"})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{local:""}))},children:"Never"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{local:"click"}))},children:"Click"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{local:"double"}))},children:"Double Click"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{local:"right"}))},children:"Right Click"})]})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Open in Emacs"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",children:(0,ve.jsx)(U.x,{children:r.follow?r.follow[0].toUpperCase()+r.follow.slice(1):"Never"})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{follow:""}))},children:"Never"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{follow:"click"}))},children:"Click"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{follow:"double"}))},children:"Double Click"}),(0,ve.jsx)(V.sN,{onClick:function(){return i(Hn(Hn({},r),{},{follow:"right"}))},children:"Right Click"})]})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Follow Emacs by..."}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",children:(0,ve.jsx)(U.x,{children:t.follow[0].toUpperCase()+t.follow.slice(1)})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n(Hn(Hn({},t),{},{follow:"color"}))},children:"Just coloring the currently opened node"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(Hn(Hn({},t),{},{follow:"local"}))},children:"Opening the local graph"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(Hn(Hn({},t),{},{follow:"zoom"}))},children:"Zooming to the current node"})]})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsxs)(g.k,{children:[(0,ve.jsx)(U.x,{children:"Local graph"}),(0,ve.jsx)(Cn,{infoText:"When in local mode and clicking a new node, should I add that node's local graph or open the new one?"})]}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,rightIcon:(0,ve.jsx)(Ht.v,{}),colorScheme:"",color:"black",children:(0,ve.jsx)(U.x,{children:"add"===t.localSame?"Add":"Replace"})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n(Hn(Hn({},t),{},{localSame:"replace"}))},children:"Open that nodes graph"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(Hn(Hn({},t),{},{localSame:"add"}))},children:"Add node to local graph"})]})]})]})]}),(0,ve.jsx)(wn,{label:"Zoom speed",value:t.zoomSpeed,min:0,max:4e3,step:100,onChange:function(e){return n(Hn(Hn({},t),{},{zoomSpeed:e}))}}),(0,ve.jsx)(wn,{label:"Zoom padding",value:t.zoomPadding,min:0,max:400,step:1,onChange:function(e){return n(Hn(Hn({},t),{},{zoomPadding:e}))},infoText:"How much to zoom out to accomodate all nodes when changing the view."})]})},An=n(46049);function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn=function(e){var t=e.visuals,n=e.setVisuals;return(0,ve.jsx)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,ve.jsx)(h.xu,{children:(0,ve.jsx)(Bn,{label:"Highlight",onChange:function(){return n((function(e){return Vn(Vn({},e),{},{highlight:!e.highlight})}))},value:t.highlight,children:(0,ve.jsxs)(_.gC,{spacing:1,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.400"}),align:"stretch",paddingLeft:0,children:[(0,ve.jsx)(wn,{label:"Highlight Link Thickness",value:t.highlightLinkSize,onChange:function(e){return n((function(t){return Vn(Vn({},t),{},{highlightLinkSize:e})}))}}),(0,ve.jsx)(wn,{label:"Highlight Node Size",value:t.highlightNodeSize,onChange:function(e){return n((function(t){return Vn(Vn({},t),{},{highlightNodeSize:e})}))}}),(0,ve.jsx)(wn,{min:0,max:1,label:"Highlight Fade",value:t.highlightFade,onChange:function(e){return n((function(t){return Vn(Vn({},t),{},{highlightFade:e})}))}}),(0,ve.jsxs)(Bn,{label:"Highlight Animation",onChange:function(){n((function(e){return Vn(Vn({},e),{},{highlightAnim:!e.highlightAnim})}))},value:t.highlightAnim,children:[(0,ve.jsx)(wn,{label:"Animation speed",onChange:function(e){return n((function(t){return Vn(Vn({},t),{},{animationSpeed:e})}))},value:t.animationSpeed,infoText:"Slower speed has a chance of being buggy",min:50,max:1e3,step:10}),(0,ve.jsx)(An.Ph,{placeholder:t.algorithmName,onChange:function(e){n((function(t){return Vn(Vn({},t),{},{algorithmName:e.target.value})}))},children:t.algorithmOptions.map((function(e){return(0,ve.jsx)("option",{value:e,children:e},e)}))})]})]})})})})},Xn=n(67546),_n=n(93441);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=function(e){var t=e.label,n=e.colorList,r=e.value,i=e.visValue,l=e.setVisuals,s=e.noEmpty,a=(0,m.useCallback)((function(e){return l((function(t){return qn(qn({},t),{},(0,o.Z)({},r,e))}))}),[]);return(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:t}),(0,ve.jsxs)(vt.J2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(vt.xo,{children:(0,ve.jsx)(q.z,{colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:(0,ve.jsx)(h.xu,{bgColor:i,borderRadius:"sm",height:6,width:6})})}),(0,ve.jsx)(bt.h,{children:(0,ve.jsx)(vt.yk,{zIndex:"tooltip",maxW:36,position:"relative",children:(0,ve.jsxs)(g.k,{flexWrap:"wrap",bgColor:"gray.200",children:[!s&&(0,ve.jsx)(h.xu,{onClick:function(){return a("")},justifyContent:"space-between",alignItems:"center",display:"flex",m:1,children:(0,ve.jsx)(h.xu,{height:6,width:6,borderColor:"gray.600",borderRadius:"xl",borderWidth:1})}),n.map((function(e){return(0,ve.jsx)(h.xu,{m:1,onClick:function(){return a(e)},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{bgColor:e,borderRadius:"xl",height:6,width:6})},e)}))]})})})]})]})};function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $n=function(e){var t=e.visuals,n=e.setVisualsCallback,r=e.highlightColor,o=e.setHighlightColor;return(0,ve.jsx)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,ve.jsxs)(h.xu,{children:[(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Nodes"}),(0,ve.jsx)(f.u,{label:"Shuffle node colors",children:(0,ve.jsx)(p.h,{"aria-label":"Shuffle node colors",size:"sm",icon:(0,ve.jsx)(Xn.n,{}),variant:"ghost",onClick:function(){var e,r=null!==(e=t.nodeColorScheme)&&void 0!==e?e:[];n(Kn(Kn({},t),{},{nodeColorScheme:r.map((function(e){return[Math.random(),e]})).sort((function(e,t){return(0,l.Z)(e,1)[0]-(0,l.Z)(t,1)[0]})).map((function(e){var t=(0,l.Z)(e,2);t[0];return t[1]}))}))}})}),(0,ve.jsx)(f.u,{label:"Cycle node colors",children:(0,ve.jsx)(p.h,{"aria-label":"Shift node colors",icon:(0,ve.jsx)(_n.L,{}),size:"sm",variant:"ghost",onClick:function(){var e,r=null!==(e=t.nodeColorScheme)&&void 0!==e?e:[];n(Kn(Kn({},t),{},{nodeColorScheme:[].concat((0,i.Z)(r.slice(1,r.length)),[r[0]])}))}})}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",closeOnSelect:!1,matchWidth:!0,children:[(0,ve.jsx)(V.j2,{width:20,as:q.z,colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:(0,ve.jsx)(g.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:t.nodeColorScheme.map((function(e){return(0,ve.jsx)(h.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsx)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:(0,ve.jsx)(V.__,{width:500,type:"checkbox",defaultValue:t.nodeColorScheme,onChange:function(e){e.length&&n(Kn(Kn({},t),{},{nodeColorScheme:e}))},children:M.map((function(e){return(0,ve.jsx)(V.ii,{isChecked:t.nodeColorScheme.some((function(t){return t===e})),value:e,isDisabled:1===t.nodeColorScheme.length&&t.nodeColorScheme[0]===e,children:(0,ve.jsx)(h.xu,{justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})})},e)}))})})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Links"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:(0,ve.jsx)(h.xu,{children:t.linkColorScheme?(0,ve.jsx)(h.xu,{bgColor:t.linkColorScheme,borderRadius:"sm",height:6,width:6}):(0,ve.jsx)(g.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:t.nodeColorScheme.map((function(e){return(0,ve.jsx)(h.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n(Kn(Kn({},t),{},{linkColorScheme:""}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(g.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:t.nodeColorScheme.map((function(e){return(0,ve.jsx)(h.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),M.map((function(e){return(0,ve.jsx)(V.sN,{onClick:function(){return n(Kn(Kn({},t),{},{linkColorScheme:e}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))]})]})]})]}),(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Accent"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:(0,ve.jsx)(h.xu,{bgColor:r,borderRadius:"sm",height:6,width:6})}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsx)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:M.map((function(e){return(0,ve.jsx)(V.sN,{onClick:function(){return o(e)},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))})]})]})]}),(0,ve.jsx)(Qn,{colorList:M,label:"Link highlight",setVisuals:n,value:"linkHighlight",visValue:t.linkHighlight}),(0,ve.jsx)(Qn,{colorList:M,label:"Node highlight",setVisuals:n,value:"nodeHighlight",visValue:t.nodeHighlight}),(0,ve.jsx)(Qn,{colorList:M,label:"Background",setVisuals:n,value:"backgroundColor",visValue:t.backgroundColor}),(0,ve.jsx)(Qn,{colorList:M,label:"Emacs node",setVisuals:n,value:"emacsNodeColor",visValue:t.emacsNodeColor})]})})};function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tr=function(e){var t=e.visuals,n=e.setVisuals,r=e.threeDim;return(0,ve.jsx)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,ve.jsxs)(h.xu,{children:[(0,ve.jsx)(wn,{label:"Node size",value:t.nodeRel,onChange:function(e){return n(er(er({},t),{},{nodeRel:e}))}}),(0,ve.jsx)(wn,{label:"Node degree size multiplier",value:t.nodeSizeLinks,min:0,max:2,onChange:function(e){return n(er(er({},t),{},{nodeSizeLinks:e}))}}),(0,ve.jsx)(wn,{label:"Node zoom invariance",value:t.nodeZoomSize,min:0,max:2,infoText:"How much the graph will try to keep the nodesize consistent across zoom scales. 0 is no consistency, node will always be their true size, 1 is linear, 2 is quadratic.",onChange:function(e){return n((function(t){return er(er({},t),{},{nodeZoomSize:e})}))}}),r&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(wn,{label:"Node opacity",value:t.nodeOpacity,min:0,max:1,onChange:function(e){return n(er(er({},t),{},{nodeOpacity:e}))}}),(0,ve.jsx)(wn,{label:"Node resolution",value:t.nodeResolution,min:5,max:32,step:1,onChange:function(e){return n(er(er({},t),{},{nodeResolution:e}))}})]}),(0,ve.jsx)(wn,{label:"Link width",value:t.linkWidth,onChange:function(e){return n(er(er({},t),{},{linkWidth:e}))}}),r&&(0,ve.jsx)(wn,{label:"Link opacity",min:0,max:1,value:t.linkOpacity,onChange:function(e){return n(er(er({},t),{},{linkOpacity:e}))}}),(0,ve.jsxs)(Bn,{label:"Link arrows",value:t.arrows,onChange:function(){return n(er(er({},t),{},{arrows:!t.arrows}))},children:[(0,ve.jsx)(wn,{label:"Arrow size",value:t.arrowsLength/10,onChange:function(e){return n(er(er({},t),{},{arrowsLength:10*e}))}}),(0,ve.jsx)(wn,{label:"Arrow Position",value:t.arrowsPos,min:0,max:1,step:.01,onChange:function(e){return n(er(er({},t),{},{arrowsPos:e}))}}),(0,ve.jsx)(Qn,{colorList:M,label:"Arrow Color",setVisuals:n,value:"arrowsColor",visValue:t.arrowsColor},"arrow")]}),(0,ve.jsxs)(Bn,{label:"Directional Particles",value:t.particles,onChange:function(){return n(er(er({},t),{},{particles:!t.particles}))},children:[(0,ve.jsx)(wn,{label:"Particle Number",value:t.particlesNumber,max:5,step:1,onChange:function(e){return n(er(er({},t),{},{particlesNumber:e}))}}),(0,ve.jsx)(wn,{label:"Particle Size",value:t.particlesWidth,onChange:function(e){return n(er(er({},t),{},{particlesWidth:e}))}})]})]})})};function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ir=function(e){var t=e.visuals,n=e.setVisuals;return(0,ve.jsxs)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.400"}),align:"stretch",color:"gray.800",children:[(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",children:[(0,ve.jsx)(U.x,{children:"Show labels"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:t.labels?t.labels<2?"On Highlight":"Always":"Never"}),(0,ve.jsxs)(bt.h,{children:[" ",(0,ve.jsxs)(V.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n(rr(rr({},t),{},{labels:0}))},children:"Never"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(rr(rr({},t),{},{labels:1}))},children:"On Highlight"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(rr(rr({},t),{},{labels:2}))},children:"Always"}),(0,ve.jsx)(V.sN,{onClick:function(){return n(rr(rr({},t),{},{labels:3}))},children:"Always (even in 3D)"})]})]})]})]}),(0,ve.jsxs)(En.U,{in:t.labels>1,animateOpacity:!0,children:[(0,ve.jsx)(h.xu,{paddingTop:2,children:(0,ve.jsx)(wn,{label:"Label Appearance Scale",value:2*t.labelScale,onChange:function(e){return n(rr(rr({},t),{},{labelScale:e/2}))}})}),(0,ve.jsxs)(h.xu,{paddingTop:2,children:[(0,ve.jsx)(wn,{label:"Label dynamicity",infoText:"By default, labels of nodes with more links will appear earlier than those with fewer. This slider changes the strength of this effect, put it at zero to disable it.",value:t.labelDynamicStrength,min:0,max:1,step:.05,onChange:function(e){return n((function(t){return rr(rr({},t),{},{labelDynamicStrength:e})}))}}),(0,ve.jsx)(En.U,{in:t.labelDynamicStrength>0,children:(0,ve.jsx)(wn,{label:"Dynamic zoom degree cap",infoText:"The maximum number of links that is considered for the 'dynamic zoom effect'. Past this number all number of links are treated the same.",value:t.labelDynamicDegree,min:1,max:15,step:1,onChange:function(e){return n((function(t){return rr(rr({},t),{},{labelDynamicDegree:e})}))}})})]})]}),(0,ve.jsx)(Qn,{colorList:M,label:"Text",setVisuals:n,value:"labelTextColor",visValue:t.labelTextColor}),(0,ve.jsxs)(h.xu,{children:[(0,ve.jsx)(Qn,{colorList:M,label:"Background",setVisuals:n,value:"labelBackgroundColor",visValue:t.labelBackgroundColor}),(0,ve.jsx)(En.U,{in:!!t.labelBackgroundColor,animateOpacity:!0,children:(0,ve.jsx)(h.xu,{paddingTop:2,children:(0,ve.jsx)(wn,{label:"Background opacity",value:t.labelBackgroundOpacity,onChange:function(e){console.log(t.labelBackgroundOpacity),n(rr(rr({},t),{},{labelBackgroundOpacity:e}))},min:0,max:1,step:.01})})})]}),(0,ve.jsx)(wn,{label:"Label font size",value:t.labelFontSize,min:5,max:20,step:.5,onChange:function(e){return n(rr(rr({},t),{},{labelFontSize:e}))}}),(0,ve.jsx)(wn,{label:"Max. label characters",value:t.labelLength,min:10,max:100,step:1,onChange:function(e){return n(rr(rr({},t),{},{labelLength:e}))}}),(0,ve.jsx)(wn,{label:"Max. label line length",value:t.labelWordWrap,min:10,max:100,step:1,onChange:function(e){return n(rr(rr({},t),{},{labelWordWrap:e}))}}),(0,ve.jsx)(wn,{label:"Space between label lines",value:t.labelLineSpace,min:.2,max:3,step:.1,onChange:function(e){return n(rr(rr({},t),{},{labelLineSpace:e}))}})]})},or=n(67690),lr=function(){var e=(0,m.useContext)(mt.N),t=e.emacsTheme,n=e.setEmacsTheme;e.highlightColor;return(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",pl:7,pr:2,children:[(0,ve.jsx)(U.x,{children:"Theme"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"bottom",closeOnSelect:!1,children:[(0,ve.jsx)(V.j2,{as:q.z,size:"sm",colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:t[0]}),(0,ve.jsxs)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,ve.jsx)(V.sN,{onClick:function(){return""},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,ve.jsx)(h.xu,{height:6,width:6})}),Object.keys(or.n).map((function(e,t){return(0,ve.jsxs)(V.sN,{onClick:function(){return n([e,or.n[e]])},justifyContent:"space-between",alignItems:"center",display:"flex",children:[(0,ve.jsx)(U.x,{children:e}),(0,ve.jsx)(g.k,{height:6,width:20,flexDirection:"column",flexWrap:"wrap",children:Object.values(or.n[e]).map((function(e){return(0,ve.jsx)(h.xu,{bgColor:e,flex:"1 1 8px"},e)}))})]},e)}))]})]})]})};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cr=function(e){var t=e.visuals,n=e.setVisuals;return(0,ve.jsx)(_.gC,{spacing:2,justifyContent:"flex-start",divider:(0,ve.jsx)(_.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,ve.jsxs)(h.xu,{children:[(0,ve.jsxs)(Bn,{label:"Dash cite links",infoText:"Add dashes to citation links made with org-roam-bibtex",value:t.citeDashes,onChange:function(){return n(ar(ar({},t),{},{citeDashes:!t.citeDashes}))},children:[(0,ve.jsx)(wn,{label:"Dash length",value:t.citeDashLength/10,onChange:function(e){return n(ar(ar({},t),{},{citeDashLength:10*e}))}}),(0,ve.jsx)(wn,{label:"Gap length",value:t.citeGapLength/5,onChange:function(e){return n(ar(ar({},t),{},{citeGapLength:5*e}))}})]}),(0,ve.jsx)(Qn,{colorList:M,label:"Citation node color",setVisuals:n,value:"citeNodeColor",visValue:t.citeNodeColor}),(0,ve.jsx)(Qn,{colorList:M,label:"Citation link color",setVisuals:n,value:"citeLinkColor",visValue:t.citeLinkColor}),(0,ve.jsx)(Qn,{colorList:M,label:"Reference link highlight",setVisuals:n,value:"citeLinkHighlightColor",visValue:t.citeLinkHighlightColor}),(0,ve.jsxs)(Bn,{label:"Dash ref links",infoText:"Add dashes to citation links, whose target has a note, made with org-roam-bibtex",value:t.refDashes,onChange:function(){return n(ar(ar({},t),{},{refDashes:!t.refDashes}))},children:[(0,ve.jsx)(wn,{label:"Dash length",value:t.refDashLength/10,onChange:function(e){return n(ar(ar({},t),{},{refDashLength:10*e}))}}),(0,ve.jsx)(wn,{label:"Gap length",value:t.refGapLength/5,onChange:function(e){return n(ar(ar({},t),{},{refGapLength:5*e}))}})]}),(0,ve.jsx)(Qn,{colorList:M,label:"Reference node color",setVisuals:n,value:"refNodeColor",visValue:t.refNodeColor}),(0,ve.jsx)(Qn,{colorList:M,label:"Reference link color",setVisuals:n,value:"refLinkColor",visValue:t.refLinkColor}),(0,ve.jsx)(Qn,{colorList:M,label:"Reference link highlight",setVisuals:n,value:"refLinkHighlightColor",visValue:t.refLinkHighlightColor})]})})};function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=function(e){var t=e.coloring,n=e.setColoring;return(0,ve.jsxs)(g.k,{alignItems:"center",justifyContent:"space-between",pl:7,pr:2,children:[(0,ve.jsx)(U.x,{children:"Graph coloring"}),(0,ve.jsxs)(V.v2,{isLazy:!0,placement:"right",children:[(0,ve.jsx)(V.j2,{as:q.z,size:"sm",colorScheme:"",color:"black",rightIcon:(0,ve.jsx)(Ht.v,{}),children:"degree"===t.method?"Links":"Communities"}),(0,ve.jsx)(bt.h,{children:(0,ve.jsxs)(V.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,ve.jsx)(V.sN,{onClick:function(){return n((function(e){return dr(dr({},e),{},{method:"degree"})}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:"Number of links"}),(0,ve.jsx)(V.sN,{onClick:function(){return n((function(e){return dr(dr({},e),{},{method:"community"})}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:"Communities"})]})})]})]})},gr=function(e){var t=e.coloring,n=e.setColoring,r=e.visuals,i=e.setVisuals,o=e.highlightColor,l=e.setHighlightColor,s=e.threeDim,a=(0,m.useCallback)((function(e){return i(e)}),[]);return(0,ve.jsxs)(_.gC,{justifyContent:"flex-start",align:"stretch",children:[(0,ve.jsx)(lr,{}),(0,ve.jsx)(hr,{coloring:t,setColoring:n}),(0,ve.jsxs)(dn.UQ,{allowToggle:!0,defaultIndex:[0],paddingLeft:3,children:[(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{children:(0,ve.jsxs)(g.k,{justifyContent:"space-between",w:"100%",children:[(0,ve.jsx)(U.x,{children:"Colors"}),(0,ve.jsx)(dn.XE,{marginRight:2})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)($n,{visuals:r,setVisualsCallback:a,highlightColor:o,setHighlightColor:l})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{children:(0,ve.jsxs)(g.k,{justifyContent:"space-between",w:"100%",children:[(0,ve.jsx)(U.x,{children:"Nodes & Links"}),(0,ve.jsx)(dn.XE,{marginRight:2})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(tr,{visuals:r,setVisuals:a,threeDim:s})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{children:(0,ve.jsxs)(g.k,{justifyContent:"space-between",w:"100%",children:[(0,ve.jsx)(U.x,{children:"Labels"}),(0,ve.jsx)(dn.XE,{marginRight:2})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(ir,{visuals:r,setVisuals:a})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{children:(0,ve.jsxs)(g.k,{justifyContent:"space-between",w:"100%",children:[(0,ve.jsx)(U.x,{children:"Highlighting"}),(0,ve.jsx)(dn.XE,{marginRight:2})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(Jn,{visuals:r,setVisuals:a})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{children:(0,ve.jsxs)(g.k,{justifyContent:"space-between",w:"100%",children:[(0,ve.jsx)(U.x,{children:"Citations"}),(0,ve.jsx)(dn.XE,{marginRight:2})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(cr,{visuals:r,setVisuals:a})})]})]})]})},fr=["style"];function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr=function(e){var t=e.physics,n=e.setPhysics,r=e.threeDim,i=e.setThreeDim,o=e.filter,s=e.setFilter,a=e.visuals,c=e.setVisuals,u=e.mouse,d=e.setMouse,g=e.behavior,x=e.setBehavior,j=e.tags,v=e.tagColors,b=e.setTagColors,y=e.coloring,C=e.setColoring,O=e.local,w=e.setLocal,k=tn("showTweaks",!1),S=(0,l.Z)(k,2),N=S[0],I=S[1],P=(0,m.useContext)(mt.N),D=P.highlightColor,z=P.setHighlightColor;return N?(0,ve.jsxs)(h.xu,{position:"absolute",bg:"alt.100",w:"xs",marginTop:2,marginLeft:2,borderRadius:"lg",paddingBottom:5,zIndex:10,boxShadow:"xl",maxH:"95vh",fontSize:"sm",children:[(0,ve.jsxs)(h.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:2,paddingTop:1,children:[(0,ve.jsx)(f.u,{label:"2D",children:(0,ve.jsx)(q.z,{onClick:function(){return i(!r)},variant:"subtle",zIndex:"overlay",children:r?"3D":"2D"})}),(0,ve.jsxs)(h.xu,{display:"flex",alignItems:"center",children:[(0,ve.jsx)(f.u,{label:"Reset settings to defaults",children:(0,ve.jsx)(p.h,{"aria-label":"Reset Defaults",icon:(0,ve.jsx)(cn.A,{}),onClick:function(){c(F),s(R),d(W),n(T),x(H),C(Z),z("purple.500"),w(A)},variant:"subtle",size:"sm"})}),(0,ve.jsx)(p.h,{size:"sm",icon:(0,ve.jsx)(un.T,{}),"aria-label":"Close Tweak Panel",variant:"subtle",onClick:function(){return I(!1)}})]})]}),(0,ve.jsx)(wt.ZP,{autoHeight:!0,autoHeightMax:.85*globalThis.innerHeight,autoHide:!0,renderThumbVertical:function(e){var t=e.style,n=(0,oe.Z)(e,fr);return(0,ve.jsx)(h.xu,xr(xr({},n),{},{style:xr(xr({},t),{},{borderRadius:10}),bg:D}))},children:(0,ve.jsxs)(dn.UQ,{allowMultiple:!0,allowToggle:!0,color:"black",children:[(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:[(0,ve.jsx)(dn.XE,{marginRight:2}),(0,ve.jsx)(J.X,{size:"sm",children:"Filter"})]}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(In,{filter:o,setFilter:s,tagColors:v,setTagColors:b,highlightColor:D,colorList:M,tags:j,local:O,setLocal:w})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsx)(dn.KF,{display:"flex",justifyContent:"space-between",children:(0,ve.jsxs)(h.xu,{display:"flex",children:[(0,ve.jsx)(dn.XE,{marginRight:2}),(0,ve.jsx)(J.X,{size:"sm",children:"Physics"})]})}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(Zn,{physics:t,setPhysics:n})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:[(0,ve.jsx)(dn.XE,{marginRight:2}),(0,ve.jsx)(J.X,{size:"sm",children:"Visual"})]}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(gr,{visuals:a,setVisuals:c,highlightColor:D,setHighlightColor:z,threeDim:r,coloring:y,setColoring:C})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:[(0,ve.jsx)(dn.XE,{marginRight:2}),(0,ve.jsx)(J.X,{size:"sm",children:"Behavior"})]}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(Wn,{behavior:g,setBehavior:x,mouse:u,setMouse:d})})]}),(0,ve.jsxs)(dn.Qd,{children:[(0,ve.jsxs)(dn.KF,{children:[(0,ve.jsx)(h.xu,{flex:"1",textAlign:"left",children:"Settings"}),(0,ve.jsx)(dn.XE,{})]}),(0,ve.jsx)(dn.Hk,{children:(0,ve.jsx)(Ln,{})})]})]})})]}):(0,ve.jsx)(h.xu,{position:"absolute",zIndex:"overlay",marginTop:1,marginLeft:0,display:N?"none":"block",children:(0,ve.jsx)(p.h,{variant:"subtle","aria-label":"Settings",icon:(0,ve.jsx)(an.e,{}),onClick:function(){return I(!0)}})})},vr=n(22663),br=n.n(vr),mr=function(e){var t,n=e.linksByNodeId,r=e.visuals,i=e.highlightedNodes,o=e.previouslyHighlightedNodes,l=e.opacity,s=e.node,a=null!==(t=n[s.id])&&void 0!==t?t:[],u=a.length?a.filter((function(e){return"parent"===e.type})).length:0,d=3+a.length*r.nodeSizeLinks-(c.filter.parent?0:u);return 1===r.highlightNodeSize?d:d*(i[s.id]||o[s.id]?1+l*(r.highlightNodeSize-1):1)};function yr(e,t){return"rgba("+(e=e.replace("#","")).match(new RegExp("(.{"+e.length/3+"})","g")).map((function(t){return parseInt(e.length%2?t+t:t,16)})).concat(isFinite(t)?t:1).join(",")+")"}function Cr(e){var t,n,r,o,l=e.labelBackgroundColor,s=e.labelTextColor,a=e.node,c=e.ctx,u=e.globalScale,d=e.highlightedNodes,h=e.previouslyHighlightedNodes,g=e.visuals,f=e.opacity,p=e.filteredLinksByNodeId,x=(e.nodeRel,e.hoverNode),j=e.lastHoverNode;if(a&&g.labels){var v=null!==(t=null===x||void 0===x?void 0:x.id)&&void 0!==t?t:"",b=null!==(n=null===j||void 0===j?void 0:j.id)&&void 0!==n?n:"",m=null!==(r=p[a.id])&&void 0!==r?r:[],y=!(!d[a.id]&&!h[a.id]),C=Math.min(5*(u-g.labelScale)+2*Math.pow(Math.min(m.length,g.labelDynamicDegree),g.labelDynamicStrength),1);if(!(C<.01)||y){var O=null!==(o=a.title)&&void 0!==o?o:"",w=O.substring(0,g.labelLength),k=Math.cbrt(g.nodeRel*mr({node:a,highlightedNodes:d,linksByNodeId:p,opacity:f,previouslyHighlightedNodes:h,visuals:g})/Math.pow(u,g.nodeZoomSize)),S=g.labelFontSize/Math.cbrt(Math.pow(u,g.nodeZoomSize)),N=[1.1*c.measureText(w).width,S].map((function(e){return e+.5*S})),I=function(e,t,n,r,i){return i?Math.max(e,r):1*e*(-1*(t.highlightFade*r-1))}(C,g,0,f,y);if(g.labelBackgroundColor&&g.labelBackgroundOpacity){var P=yr(l,I*g.labelBackgroundOpacity);c.fillStyle=P,c.fillRect.apply(c,[a.x-N[0]/2,a.y-N[1]/2+k].concat((0,i.Z)(N)))}c.textAlign="center",c.textBaseline="middle";var D=yr(s,I);c.fillStyle=D,c.font="".concat(S,"px Sans-Serif");var z=br()(w,{width:g.labelWordWrap}).split("\n"),L=O.length>g.labelLength?[].concat((0,i.Z)(z.slice(0,-1)),["".concat(z.slice(-1),"...")]):z,E=[v,b].includes(a.id)?1+.3*f:1;L.forEach((function(e,t){c.fillText(e,a.x,a.y+E*k*8+g.labelLineSpace*S*t)}))}}}var Or=function(e){var t,n,r,i,o,l=e.id,s=e.linksByNodeId,a=e.visuals,c=e.coloring,u=e.cluster,d=null!==(t=null===(n=s[l])||void 0===n?void 0:n.length)&&void 0!==t?t:0;return"degree"===c.method?a.nodeColorScheme[(r=d,i=0,o=a.nodeColorScheme.length-1,Math.min(Math.max(r,i),o))]:a.nodeColorScheme[d&&u[l]%a.nodeColorScheme.length]},wr=function(e,t){var n,r;return(null===(n=e.source)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id)||(null===(r=e.target)||void 0===r?void 0:r.id)===(null===t||void 0===t?void 0:t.id)},kr=function(e){var t=e.sourceId,n=e.targetId,r=e.linksByNodeId,i=e.visuals,o=e.coloring,l=e.cluster;return r[t].length>r[n].length?Or({id:t,linksByNodeId:r,visuals:i,cluster:l,coloring:o}):Or({id:n,visuals:i,linksByNodeId:r,cluster:l,coloring:o})};function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir=n.e(907).then(n.bind(n,99907)),Pr=n.g.window?n(24878).f$:null,Dr=n.g.window?n(24878).s6:null;function zr(){var e=(0,m.useState)(!1),t=e[0],n=e[1];return(0,m.useEffect)((function(){n(!0)}),[]),t?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(b.default,{children:(0,ve.jsx)("title",{children:"ORUI"})}),(0,ve.jsx)(Lr,{})]}):null}function Lr(){var e=tn("3d",!1),t=(0,l.Z)(e,2),n=t[0],r=t[1],s=tn("tagCols",{}),a=(0,l.Z)(s,2),c=a[0],x=a[1],v=(0,m.useState)({nodeIds:[],excludedNodeIds:[]}),b=v[0],y=v[1],C=tn("physics",T),S=(0,l.Z)(C,2),I=S[0],P=S[1],D=tn("filter",R),z=(0,l.Z)(D,2),L=z[0],E=z[1],B=tn("visuals",F),M=(0,l.Z)(B,2),V=M[0],J=M[1],X=(0,m.useState)(null),_=X[0],U=X[1],q=(0,m.useState)(null),Q=q[0],G=q[1],K=tn("behavior",H),$=(0,l.Z)(K,2),Y=$[0],ee=$[1],te=tn("mouse",W),ne=(0,l.Z)(te,2),re=ne[0],ie=ne[1],oe=tn("coloring",Z),le=(0,l.Z)(oe,2),se=le[0],ae=le[1],ce=tn("local",A),ue=(0,l.Z)(ce,2),de=ue[0],he=ue[1],ge=(0,N.Z)({}),fe=(0,l.Z)(ge,2),pe=fe[0],xe=fe[1],je=xe.set,be=xe.reset,me=xe.undo,ye=xe.redo,Ce=xe.canUndo,Oe=xe.canRedo,we=(pe.past,pe.present),ke=(pe.future,(0,m.useState)(null)),Se=ke[0],Ne=ke[1],Ie=(0,u.q)(),De=Ie.isOpen,ze=Ie.onOpen,Le=Ie.onClose,Ee=(0,m.useRef)({}),Be=(0,m.useRef)({}),Te=(0,m.useRef)({}),Re=(0,m.useRef)([]),Ze=(0,m.useRef)(null),Fe=(0,m.useState)({}),He=Fe[0],We=Fe[1],Ae=(0,m.useRef)({}),Me=(0,m.useRef)({nodes:[],links:[]});(0,m.useEffect)((function(){_&&(Me.current=_)}),[_]);var Ve=(0,m.useContext)(mt.N).setEmacsTheme,Je=(0,m.useRef)({nodeIds:[],excludedNodeIds:[]}),Xe=(0,m.useRef)(H);Xe.current=Y;var _e=(0,m.useRef)(null);Je.current=b;var Ue=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if("color"!==e){var l=Ze.current,s=Je.current,a=Xe.current,c=null!==(n=Be.current[t])&&void 0!==n?n:[],u=Object.fromEntries([t].concat((0,i.Z)(c.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]})));if("zoom"===e)return s.nodeIds.length&&y({nodeIds:[],excludedNodeIds:[]}),void setTimeout((function(){return l.zoomToFit(r,o,(function(e){return u[e.id]}))}),50);if(!s.nodeIds.length)return y((function(e){return Nr(Nr({},e),{},{nodeIds:[t]})})),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);if("add"!==a.localSame)return y((function(e){return Nr(Nr({},e),{},{nodeIds:[t]})})),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);if(!s.nodeIds.includes(t)||!s.nodeIds.some((function(e){return u[e]})))return y((function(e){return Nr(Nr({},e),{},{nodeIds:[t]})})),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);y((function(e){return Nr(Nr({},e),{},{nodeIds:[].concat((0,i.Z)(e.nodeIds),[t])})})),setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50)}};(0,m.useEffect)((function(){_e.current=new k.Z("ws://localhost:35903"),_e.current.addEventListener("open",(function(){console.log("Connection with Emacs established")})),_e.current.addEventListener("message",(function(e){var t=Xe.current,n=JSON.parse(e.data);switch(n.type){case"graphdata":return function(e){var t,n,r,s=Ee.current;Re.current=null!==(t=e.tags)&&void 0!==t?t:[];var a=null!==(n=e.nodes)&&void 0!==n?n:[],c=null!==(r=e.links)&&void 0!==r?r:[],u=a.reduce((function(e,t){var n;return Nr(Nr({},e),{},(0,o.Z)({},t.file,[].concat((0,i.Z)(null!==(n=e[t.file])&&void 0!==n?n:[]),[t])))}),{}),d=Object.keys(u).flatMap((function(e){var t,n=null!==(t=u[e])&&void 0!==t?t:[],r=n.find((function(e){return 0===e.level})),i=n.filter((function(e){return 0!==e.level}));return r?i.map((function(e){var t=n.filter((function(t){var n,r;return!(t.level>=e.level||t.pos>=e.pos||null===(n=e.olp)||void 0===n||!n.includes(null===(r=t.title)||void 0===r?void 0:r.replace(/ *\[\d*\/\d*\] */g,"")))})).reduce((function(e,t){return t.level>e.level&&(e=t),e}),r);return{source:e.id,target:(null===t||void 0===t?void 0:t.id)||r.id,type:"heading"}})):[]})),h=Object.keys(u).flatMap((function(e){var t,n=null!==(t=u[e])&&void 0!==t?t:[],r=n.find((function(e){return 0===e.level})),i=n.filter((function(e){return 0!==e.level}));return r?i.map((function(e){return{source:e.id,target:r.id,type:"parent"}})):[]}));Ee.current=Object.fromEntries(a.map((function(e){return[e.id,e]})));var g=[].concat((0,i.Z)(c),(0,i.Z)(d),(0,i.Z)(h)),f=[],p=g.map((function(e){var t=e.source,n=e.target;return Ee.current[t]?Ee.current[n]?e:(f.push({id:n,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:n,level:0,pos:0,olp:null}),Nr(Nr({},e),{},{type:"bad"})):(f.push({id:t,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:t,level:0,pos:0,olp:null}),Nr(Nr({},e),{},{type:"bad"}))}));Ee.current=Nr(Nr({},Ee.current),Object.fromEntries(f.map((function(e){return[e.id,e]})))),Be.current=p.reduce((function(e,t){var n,r,l;return Nr(Nr({},e),{},(l={},(0,o.Z)(l,t.source,[].concat((0,i.Z)(null!==(n=e[t.source])&&void 0!==n?n:[]),[t])),(0,o.Z)(l,t.target,[].concat((0,i.Z)(null!==(r=e[t.target])&&void 0!==r?r:[]),[t])),l))}),{});var x=[].concat((0,i.Z)(a),f);Te.current=x.reduce((function(e,t){var n,r=null===(n=t.properties)||void 0===n?void 0:n.ROAM_REFS;if(null===r||void 0===r||!r.includes("cite"))return e;var i=r.replaceAll(/cite:(.*)/g,"$1");return i?Nr(Nr({},e),{},(0,o.Z)({},i,t)):e}),{});var j={nodes:x,links:p},v=Me.current;if(0===v.nodes.length){var b=JSON.parse(JSON.stringify(j));return Me.current=b,void U(b)}var m=[].concat((0,i.Z)(v.nodes.flatMap((function(e){var t,n=null!==(t=Ee.current[null===e||void 0===e?void 0:e.id])&&void 0!==t&&t;return n?[Nr(Nr({},e),n)]:[]}))),(0,i.Z)(Object.keys(Ee.current).filter((function(e){return!s[e]})).map((function(e){return Ee.current[e]})))),y=m.reduce((function(e,t,n){var r=null===t||void 0===t?void 0:t.id;return Nr(Nr({},e),{},(0,o.Z)({},r,n))}),{}),C=p.map((function(e){var t=Mt(e),n=(0,l.Z)(t,2),r=n[0],i=n[1];return Nr(Nr({},e),{},{source:m[y[r]],target:m[y[i]]})}));U({nodes:m,links:C})}(n.data);case"variables":return We(n.data),void console.log(n);case"theme":return Ve(["custom",n.data]);case"command":switch(n.data.commandName){case"local":var r=Y.zoomSpeed,s=Y.zoomPadding;Ue("local",n.data.id,r,s),G(n.data.id);break;case"zoom":var a,c,u=(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.speed)||t.zoomSpeed,d=(null===n||void 0===n||null===(c=n.data)||void 0===c?void 0:c.padding)||t.zoomPadding;Ue("zoom",n.data.id,u,d),G(n.data.id);break;case"follow":Ue(t.follow,n.data.id,t.zoomSpeed,t.zoomPadding),G(n.data.id);break;case"change-local-graph":var h=Ee.current[n.data.id];if(!h)break;console.log(n),st(h,n.data.manipulation);break;default:return console.error("unknown message type",n.type)}}}))}),[]),(0,m.useEffect)((function(){var e=Ze.current;!e||b.nodeIds.length>1||(b.nodeIds.length||!I.gravityOn?setTimeout((function(){e.zoomToFit(5,200)}),50):e.zoomToFit())}),[b.nodeIds]);var qe=(0,j.iP)(),Qe=(0,l.Z)(qe,2),Ge=Qe[0],Ke=Qe[1],$e=(0,m.useRef)(),Ye=(0,m.useState)(null),et=Ye[0],tt=Ye[1],nt=(0,m.useState)({left:0,top:0,right:void 0,bottom:void 0}),rt=nt[0],it=nt[1],ot=(0,u.q)();(0,d.O)({ref:$e,handler:function(){ot.onClose()}});var lt=function(e,t,n){it(n||{left:t.pageX,top:t.pageY,right:void 0,bottom:void 0}),tt(e),ot.onOpen()},st=function(e,t){"remove"!==t?"replace"!==t?b.nodeIds.includes(e.id)||y((function(t){return{excludedNodeIds:t.excludedNodeIds.filter((function(t){return t!==e.id})),nodeIds:[].concat((0,i.Z)(t.nodeIds),[e.id])}})):y({nodeIds:[e.id],excludedNodeIds:[]}):y((function(t){return{nodeIds:t.nodeIds.filter((function(t){return t!==e.id})),excludedNodeIds:[].concat((0,i.Z)(t.excludedNodeIds),[e.id])}}))},at=tn("mainWindowWidth",Ge),ct=(0,l.Z)(at,2),ut=ct[0],dt=ct[1];return(0,ve.jsx)(kn.Provider,{value:Nr({},He),children:(0,ve.jsxs)(h.xu,{display:"flex",alignItems:"flex-start",flexDirection:"row",height:"100vh",overflow:"clip",children:[(0,ve.jsx)(jr,{physics:I,setPhysics:P,threeDim:n,setThreeDim:r,filter:L,setFilter:E,visuals:V,setVisuals:J,mouse:re,setMouse:ie,behavior:Y,setBehavior:ee,tagColors:c,setTagColors:x,coloring:se,setColoring:ae,local:de,setLocal:he,tags:Re.current}),(0,ve.jsx)(h.xu,{position:"absolute",children:_&&(0,ve.jsx)(Er,{nodeById:Ee.current,linksByNodeId:Be.current,webSocket:_e.current,variables:He,physics:I,graphData:_,threeDim:n,emacsNodeId:Q,filter:L,visuals:V,behavior:Y,mouse:re,scope:b,setScope:y,tagColors:c,setPreviewNode:je,sidebarHighlightedNode:Se,windowWidth:Ge,windowHeight:Ke,openContextMenu:lt,contextMenu:ot,handleLocal:st,mainWindowWidth:ut,setMainWindowWidth:dt,setContextMenuTarget:tt,graphRef:Ze,clusterRef:Ae,coloring:se,local:de})}),(0,ve.jsx)(h.xu,{position:"relative",zIndex:4,width:"100%",children:(0,ve.jsx)(g.k,{className:"headerBar",h:10,flexDir:"column",children:(0,ve.jsx)(g.k,{alignItems:"center",h:10,justifyContent:"flex-end",children:(0,ve.jsxs)(g.k,{height:"100%",flexDirection:"row",children:[b.nodeIds.length>0&&(0,ve.jsx)(f.u,{label:"Return to main graph",children:(0,ve.jsx)(p.h,{m:1,icon:(0,ve.jsx)(O.DvO,{}),"aria-label":"Exit local mode",onClick:function(){return y((function(e){return Nr(Nr({},e),{},{nodeIds:[]})}))},variant:"subtle"})}),(0,ve.jsx)(f.u,{label:De?"Close sidebar":"Open sidebar",children:(0,ve.jsx)(p.h,{m:1,icon:(0,ve.jsx)(w.iBV,{}),"aria-label":"Close file-viewer",variant:"subtle",onClick:De?Le:ze})})]})})})}),(0,ve.jsx)(h.xu,{position:"relative",zIndex:4,children:(0,ve.jsx)(sn,{isOpen:De,onOpen:ze,onClose:Le,previewNode:we,setPreviewNode:je,canUndo:Ce,canRedo:Oe,previousPreviewNode:me,nextPreviewNode:ye,resetPreviewNode:be,setSidebarHighlightedNode:Ne,openContextMenu:lt,scope:b,setScope:y,windowWidth:Ge,tagColors:c,setTagColors:x,filter:L,setFilter:E,macros:He.katexMacros,attachDir:He.attachDir||"",useInheritance:He.useInheritance||!1,nodeById:Ee.current,linksByNodeId:Be.current,nodeByCite:Te.current})}),ot.isOpen&&(0,ve.jsx)("div",{ref:$e,children:(0,ve.jsx)(Pe,{scope:b,target:et,background:!1,coordinates:rt,handleLocal:st,menuClose:ot.onClose.bind(ot),webSocket:_e.current,setPreviewNode:je,setFilter:E,filter:L,setTagColors:x,tagColors:c})})]})})}var Er=function(e){var t=e.graphRef,n=e.physics,s=e.graphData,u=e.threeDim,d=e.linksByNodeId,g=e.filter,f=e.emacsNodeId,p=e.nodeById,j=e.visuals,b=e.behavior,y=e.mouse,O=e.scope,w=e.local,k=(e.setScope,e.webSocket),N=e.tagColors,I=e.setPreviewNode,P=e.sidebarHighlightedNode,D=e.windowWidth,z=e.windowHeight,L=(e.setContextMenuTarget,e.openContextMenu),E=e.contextMenu,T=e.handleLocal,R=e.variables,Z=e.clusterRef,F=e.coloring,H=R.dailyDir,W=(R.roamDir,(0,m.useState)(null)),A=W[0],V=W[1],J=(0,c.useTheme)(),X=(0,m.useContext)(mt.N).emacsTheme,_=function(e,t,n){switch(e){case y.preview:I(t);break;case y.local:T(t,b.localSame);break;case y.follow:re(t,k);break;case y.context:L(t,n)}},U=(0,m.useRef)(null);(0,m.useEffect)((function(){f&&V(p[f])}),[f]);var q=(0,m.useRef)({}),Q=(0,m.useRef)({}),G=(0,m.useMemo)((function(){var e;Q.current={};var t=null===s||void 0===s||null===(e=s.nodes)||void 0===e?void 0:e.filter((function(e){var t,n,r,i,l=e;return g.dirsBlocklist.length&&g.dirsBlocklist.some((function(e){var t;return null===l||void 0===l||null===(t=l.file)||void 0===t?void 0:t.includes(e)}))||g.dirsAllowlist.length>0&&!g.dirsAllowlist.some((function(e){var t;return null===l||void 0===l||null===(t=l.file)||void 0===t?void 0:t.includes(e)}))||g.tagsBlacklist.length&&g.tagsBlacklist.some((function(e){var t;return(null===l||void 0===l||null===(t=l.tags)||void 0===t?void 0:t.indexOf(e))>-1}))||g.tagsWhitelist.length>0&&!g.tagsWhitelist.some((function(e){var t;return(null===l||void 0===l||null===(t=l.tags)||void 0===t?void 0:t.indexOf(e))>-1}))||g.filelessCites&&null!==l&&void 0!==l&&null!==(t=l.properties)&&void 0!==t&&t.FILELESS||null!==g&&void 0!==g&&g.bad&&null!==l&&void 0!==l&&null!==(n=l.properties)&&void 0!==n&&n.bad||g.dailies&&H&&null!==(r=l.file)&&void 0!==r&&r.includes(H)?(Q.current=Nr(Nr({},Q.current),{},(0,o.Z)({},l.id,l)),!1):!g.noter||null===(i=l.properties)||void 0===i||!i.NOTER_PAGE||(Q.current=Nr(Nr({},Q.current),{},(0,o.Z)({},l.id,l)),!1)})).filter((function(e){var t,n=(null!==(t=d[null===e||void 0===e?void 0:e.id])&&void 0!==t?t:[]).filter((function(e){return!Q.current[e.source]&&!Q.current[e.target]}));return!g.orphans||(g.parent?0!==n.length:0!==n.length&&n.some((function(e){return!["parent","heading"].includes(e.type)})))})),n=t.map((function(e){return e.id})),r=s.links.filter((function(e){var t=Mt(e),r=(0,l.Z)(t,2),i=r[0],o=r[1];if(!n.includes(i)||!n.includes(o))return!1;var s=e;return g.parent?"heading"===g.parent?"parent"!==s.type:"heading"!==s.type:!["parent","heading"].includes(s.type)}));q.current=r.reduce((function(e,t){var n,r,s,a=t,c=Mt(a),u=(0,l.Z)(c,2),d=u[0],h=u[1];return Nr(Nr({},e),{},(s={},(0,o.Z)(s,d,[].concat((0,i.Z)(null!==(n=e[d])&&void 0!==n?n:[]),[a])),(0,o.Z)(s,h,[].concat((0,i.Z)(null!==(r=e[h])&&void 0!==r?r:[]),[a])),s))}),{});var a=r.map((function(e){var t=Mt(e),n=(0,l.Z)(t,2);return{target:n[0],source:n[1],weight:"cite"===e.type?1:2}}));if("community"===F.method){var c=C()().nodes(n).edges(a);Z.current=c()}return{nodes:t,links:r}}),[g,s,F.method]),K=(0,m.useState)({nodes:[],links:[]}),$=K[0],Y=K[1];(0,m.useEffect)((function(){if(O.nodeIds.length){var e=O.nodeIds.length>1?$.nodes.filter((function(e){return!O.excludedNodeIds.includes(e.id)})):[],t=e.map((function(e){return e.id})),n=function(e){var t=e.ids,n=e.excludedIds,r=e.n,i=e.linksByNodeId,o=[t[0]],s=[],a=[t[0]];return Array.from({length:r},(function(){o.forEach((function(e){var t;(null!==(t=i[e])&&void 0!==t?t:[]).forEach((function(e){var t=Mt(e),r=(0,l.Z)(t,2),i=r[0],o=r[1];n.some((function(e){return[i,o].includes(e)}))||(a.includes(i)?a.includes(o)||s.push(o):s.push(i))}))})),o=s,s.forEach((function(e){return e&&a.push(e)})),s=[]})),a}({ids:O.nodeIds,excludedIds:O.excludedNodeIds,n:w.neighbors,linksByNodeId:q.current}),r=G.nodes.filter((function(r){var i;return e.length?!t.includes(r.id)&&(null!==(i=q.current[r.id])&&void 0!==i?i:[]).some((function(e){var t=Mt(e),n=(0,l.Z)(t,2),r=n[0],i=n[1];return!O.excludedNodeIds.includes(r)&&!O.excludedNodeIds.includes(i)&&(O.nodeIds.includes(r)||O.nodeIds.includes(i))})):n.includes(r.id)})).map((function(e){return Nr(Nr({},e),{},{x:0,y:0,vy:0,vx:0})})),o=[].concat((0,i.Z)(e),(0,i.Z)(r)),s=o.map((function(e){return e.id})),a=(O.nodeIds.length>1?$.links:[]).filter((function(e){O.excludedNodeIds.some((function(t){return Mt(e).includes(t)}))})),c=G.links.filter((function(e){var n=Mt(e),r=(0,l.Z)(n,2),i=r[0],o=r[1];return!(a.length&&t.includes(o)&&t.includes(i))&&(s.includes(i)&&s.includes(o))})).map((function(e){var t=Mt(e),n=(0,l.Z)(t,2);return{source:n[0],target:n[1]}})),u=[].concat((0,i.Z)(a),(0,i.Z)(c));Y({nodes:o,links:u})}}),[w.neighbors,g,O,O.excludedNodeIds,O.nodeIds,s,G.links,G.nodes]),(0,m.useEffect)((function(){(0,r.Z)(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.current,e.next=3,Ir;case 3:i=e.sent,!n.gravityOn||O.nodeIds.length&&!n.gravityLocal?(r.d3Force("x",null),r.d3Force("y",null),u&&r.d3Force("z",null)):(r.d3Force("x",i.forceX().strength(n.gravity)),r.d3Force("y",i.forceY().strength(n.gravity)),u&&r.d3Force("z",i.forceZ().strength(n.gravity))),n.centering?r.d3Force("center",i.forceCenter().strength(n.centeringStrength)):r.d3Force("center",null),n.linkStrength&&r.d3Force("link").strength(n.linkStrength),n.linkIts&&r.d3Force("link").iterations(n.linkIts),n.charge&&r.d3Force("charge").strength(n.charge),r.d3Force("collide",n.collision?i.forceCollide().radius(n.collisionStrength):null);case 10:case"end":return e.stop()}}),e)})))()}),[n,u,O]),(0,m.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.d3ReheatSimulation()}),[n,O.nodeIds.length]);var ee=(0,m.useRef)(0),te=(0,m.useState)(1),ne=te[0],ie=te[1],oe=(0,x._7)((function(e){return ie(e)}),{duration:j.animationSpeed,algorithm:B[j.algorithmName]}),le=(0,l.Z)(oe,2),se=le[0],ae=le[1],ce=(0,x._7)((function(e){return ie(Math.min(ne,-1*(e-1)))}),{duration:j.animationSpeed,algorithm:B[j.algorithmName]}),ue=(0,l.Z)(ce,2),de=ue[0],he=ue[1],ge=(0,m.useMemo)((function(){var e;if(!U.current)return{};var t=q.current[U.current.id];return t?Object.fromEntries([null===(e=U.current)||void 0===e?void 0:e.id].concat((0,i.Z)(t.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]}))):{}}),[U.current,q.current]);(0,m.useEffect)((function(){null!==P&&void 0!==P&&P.id?V(P):V(null)}),[P]);var fe=(0,m.useRef)(null);(0,m.useEffect)((function(){if(U.current=A,A&&(fe.current=A),!j.highlightAnim)return ie(A?1:0);A?se():(ae(),ne>.5?de():ie(0))}),[A]);var pe=(0,m.useMemo)((function(){return Object.fromEntries(M.map((function(e){var t=kt(e,J),n=M.map((function(e){return[e,v.Z(t,kt(e,J))]}));return[e,Object.fromEntries(n)]})))}),[X]),xe=(0,m.useMemo)((function(){var e,t,n,r=null!==(e=q.current[null===(t=fe.current)||void 0===t?void 0:t.id])&&void 0!==e?e:[];return Object.fromEntries([null===(n=fe.current)||void 0===n?void 0:n.id].concat((0,i.Z)(r.flatMap((function(e){return Mt(e)})))).map((function(e){return[e,{}]})))}),[JSON.stringify(A),fe.current,q.current]),je=(0,m.useMemo)((function(){return kt(j.labelTextColor,J)}),[j.labelTextColor,X]),be=(0,m.useMemo)((function(){return kt(j.labelBackgroundColor,J)}),[j.labelBackgroundColor,X]),me=(0,m.useState)(!1),ye=me[0],Ce=me[1],Oe=(0,m.useRef)(1),we={graphData:O.nodeIds.length?$:G,width:D,height:z,backgroundColor:kt(j.backgroundColor,J),warmupTicks:1===O.nodeIds.length?100:O.nodeIds.length>1?20:0,onZoom:function(e){var t=e.k;e.x,e.y;return Oe.current=t},nodeColor:function(e){return function(e){var t,n,r=e.node,i=e.theme,o=e.highlightedNodes,l=e.previouslyHighlightedNodes,s=e.visuals,a=e.tagColors,c=e.highlightColors,u=e.opacity,d=e.emacsNodeId,h=e.linksByNodeId,g=e.cluster,f=e.coloring,p=o[r.id]||l[r.id];if(s.emacsNodeColor&&r.id===d)return kt(s.emacsNodeColor,i);if(a&&null!==r&&void 0!==r&&r.tags.some((function(e){return a[e]}))){var x=a[null===r||void 0===r?void 0:r.tags.filter((function(e){return a[e]}))[0]];return p?c[x][x](s.highlightFade*u):c[x][s.backgroundColor](s.highlightFade*u)}return s.citeNodeColor&&null!==r&&void 0!==r&&null!==(t=r.properties)&&void 0!==t&&t.ROAM_REFS&&null!==r&&void 0!==r&&null!==(n=r.properties)&&void 0!==n&&n.FILELESS?p?kt(s.citeNodeColor,i):c[s.citeNodeColor][s.backgroundColor](s.highlightFade*u):s.refNodeColor&&r.properties.ROAM_REFS?p?kt(s.refNodeColor,i):c[s.refNodeColor][s.backgroundColor](s.highlightFade*u):p?s.nodeHighlight?c[Or({id:r.id,cluster:g,coloring:f,linksByNodeId:h,visuals:s})][s.nodeHighlight](u):kt(Or({id:r.id,cluster:g,coloring:f,linksByNodeId:h,visuals:s}),i):c[Or({id:r.id,cluster:g,coloring:f,linksByNodeId:h,visuals:s})][s.backgroundColor](s.highlightFade*u)}({node:e,theme:J,visuals:j,cluster:Z.current,coloring:F,emacsNodeId:f,highlightColors:pe,highlightedNodes:ge,previouslyHighlightedNodes:xe,linksByNodeId:q.current,opacity:ne,tagColors:N})},nodeRelSize:j.nodeRel,nodeVal:function(e){return mr({node:e,highlightedNodes:ge,linksByNodeId:q.current,opacity:ne,previouslyHighlightedNodes:xe,visuals:j})/Math.pow(Oe.current,j.nodeZoomSize)},nodeCanvasObject:function(e,t,n){Cr(Nr({nodeRel:j.nodeRel,filteredLinksByNodeId:q.current,lastHoverNode:fe.current},{node:e,ctx:t,globalScale:n,highlightedNodes:ge,previouslyHighlightedNodes:xe,visuals:j,opacity:ne,labelTextColor:je,labelBackgroundColor:be,hoverNode:A}))},nodeCanvasObjectMode:function(){return"after"},linkDirectionalParticles:j.particles?j.particlesNumber:void 0,linkDirectionalArrowLength:j.arrows?j.arrowsLength:void 0,linkDirectionalArrowRelPos:j.arrowsPos,linkDirectionalArrowColor:j.arrowsColor?function(){return kt(j.arrowsColor,J)}:void 0,linkColor:function(e){var t,n="object"===typeof e.source?e.source.id:e.source,r="object"===typeof e.target?e.target.id:e.target,i=wr(e,U.current),o=wr(e,fe.current),l=i||o,s=e;return j.refLinkColor&&"ref"===s.type?l&&(j.refLinkHighlightColor||j.linkHighlight)?pe[j.refLinkColor][j.refLinkHighlightColor||j.linkHighlight](ne):pe[j.refLinkColor][j.backgroundColor](j.highlightFade*ne):j.citeLinkColor&&null!==(t=s.type)&&void 0!==t&&t.includes("cite")?l&&(j.citeLinkHighlightColor||j.linkHighlight)?pe[j.citeLinkColor][j.citeLinkHighlightColor||j.linkHighlight](ne):pe[j.citeLinkColor][j.backgroundColor](j.highlightFade*ne):function(e){var t=e.sourceId,n=e.targetId,r=e.needsHighlighting,i=e.theme,o=e.visuals,l=e.highlightColors,s=e.opacity,a=e.linksByNodeId,c=e.coloring,u=e.cluster;if(!o.linkHighlight&&!o.linkColorScheme&&!r){var d=kr({sourceId:t,targetId:n,linksByNodeId:a,visuals:o,coloring:c,cluster:u});return kt(d,i)}if(!r&&!o.linkColorScheme)return l[kr({sourceId:t,targetId:n,linksByNodeId:a,visuals:o,coloring:c,cluster:u})][o.backgroundColor](o.highlightFade*s);if(!r)return l[o.linkColorScheme][o.backgroundColor](o.highlightFade*s);if(!o.linkHighlight&&!o.linkColorScheme){var h=kr({sourceId:t,targetId:n,linksByNodeId:a,visuals:o,coloring:c,cluster:u});return kt(h,i)}return o.linkHighlight?o.linkColorScheme?l[o.linkColorScheme][o.linkHighlight](s):l[kr({sourceId:t,targetId:n,linksByNodeId:a,visuals:o,coloring:c,cluster:u})][o.linkHighlight](s):kt(o.linkColorScheme,i)}({sourceId:n,targetId:r,needsHighlighting:l,theme:J,cluster:Z.current,coloring:F,highlightColors:pe,linksByNodeId:q.current,opacity:ne,visuals:j})},linkWidth:function(e){if(1===j.highlightLinkSize)return j.linkWidth;var t=wr(e,U.current),n=wr(e,fe.current);return t||n?j.linkWidth*(1+ne*(j.highlightLinkSize-1)):j.linkWidth},linkDirectionalParticleWidth:j.particlesWidth,d3AlphaDecay:n.alphaDecay,d3AlphaMin:n.alphaMin,d3VelocityDecay:n.velocityDecay,onNodeClick:function(e,t){var n=e,r=t.timeStamp-ee.current<200;if(ee.current=t.timeStamp,r)return _("double",n,t);var i=ee.current;return setTimeout((function(){if(ee.current===i)return _("click",n,t)}),200)},onNodeHover:function(e){j.highlight&&(ye||(A||(he(),ie(0)),V(e)))},onNodeRightClick:function(e,t){_("right",e,t)},onNodeDrag:function(e){V(e),Ce(!0)},onNodeDragEnd:function(){V(null),Ce(!1)}};return(0,ve.jsx)(h.xu,{overflow:"hidden",onClick:E.onClose,children:u?(0,ve.jsx)(Dr,Nr(Nr({ref:t},we),{},{nodeThreeObjectExtend:!0,nodeOpacity:j.nodeOpacity,nodeResolution:j.nodeResolution,linkOpacity:j.linkOpacity,nodeThreeObject:function(e){if(j.labels&&(!(j.labels<3)||ge[e.id])){var t=new S.Z(e.title.substring(0,40));return t.color=kt(j.labelTextColor,J),t.backgroundColor=kt(j.labelBackgroundColor,J),t.padding=2,t.textHeight=8,t}}})):(0,ve.jsx)(Pr,Nr(Nr({ref:t},we),{},{linkLineDash:function(e){var t,n=e;return j.citeDashes&&null!==(t=n.type)&&void 0!==t&&t.includes("cite")?[j.citeDashLength,j.citeGapLength]:j.refDashes&&"ref"==n.type?[j.refDashLength,j.refGapLength]:null}}))})}},45301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(72013)}])}},function(e){e.O(0,[774,737,876,228,866,13,874,573,446,178,888,179],(function(){return t=45301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);